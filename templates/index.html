<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IntNetAdmin - Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        :root {
            --bg: #0f172a;
            --bg-secondary: #020617;
            --card: #1e293b;
            --border: #334155;
            --text: #f1f5f9;
            --muted: #94a3b8;
            --primary: #3b82f6;
            --primary-hover: #2563eb;
            --success: #22c55e;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #06b6d4;
        }
        
        :root.light {
            --bg: #f8fafc;
            --bg-secondary: #e2e8f0;
            --card: #ffffff;
            --border: #cbd5e1;
            --text: #1e293b;
            --muted: #64748b;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.5;
        }
        
        /* Header */
        header {
            background: var(--card);
            border-bottom: 1px solid var(--border);
            padding: 0.75rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .logo svg { width: 40px; height: 40px; }
        .logo-text h1 { font-size: 1.25rem; font-weight: 700; line-height: 1.2; }
        .logo-text .slogan { font-size: 0.7rem; color: var(--muted); font-weight: 400; }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .scan-info {
            font-size: 0.75rem;
            color: var(--muted);
            text-align: right;
        }
        .scan-info .label { opacity: 0.7; }
        .scan-info .value { font-weight: 600; color: var(--text); }
        
        .lang-switch {
            display: flex;
            gap: 0.25rem;
        }
        .lang-btn {
            background: none;
            border: 2px solid transparent;
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 4px;
            opacity: 0.5;
            transition: all 0.2s;
        }
        .lang-btn.active, .lang-btn:hover { opacity: 1; border-color: var(--primary); }
        
        .theme-toggle {
            background: var(--border);
            border: none;
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.2s;
        }
        .theme-toggle:hover { background: var(--primary); }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .user-info {
            text-align: right;
            font-size: 0.8rem;
        }
        .user-info .username { font-weight: 600; }
        .user-info .sudo-badge {
            font-size: 0.65rem;
            background: var(--success);
            color: white;
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            margin-left: 0.25rem;
        }
        .logout-btn {
            background: var(--border);
            border: none;
            color: var(--text);
            padding: 0.5rem 0.875rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        .logout-btn:hover { background: var(--error); }
        
        /* Navigation */
        .tabs {
            display: flex;
            gap: 0.25rem;
            padding: 0.75rem 1.5rem;
            background: var(--card);
            border-bottom: 1px solid var(--border);
            overflow-x: auto;
        }
        .tab {
            padding: 0.625rem 1rem;
            border-radius: 8px;
            background: transparent;
            border: none;
            color: var(--muted);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .tab:hover { background: var(--border); color: var(--text); }
        .tab.active { background: var(--primary); color: white; }
        
        /* Main Content */
        main {
            padding: 1.5rem;
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .view { display: none; }
        .view.active { display: block; }
        
        /* Cards */
        .card {
            background: var(--card);
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }
        .card-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.75rem;
        }
        .card-header h2 {
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .card-body { padding: 1.25rem; }
        .card-body.no-padding { padding: 0; }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .stat-card {
            background: var(--card);
            border-radius: 12px;
            padding: 1.25rem;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
        }
        .stat-card.green::before { background: var(--success); }
        .stat-card.blue::before { background: var(--primary); }
        .stat-card.yellow::before { background: var(--warning); }
        .stat-card.red::before { background: var(--error); }
        .stat-card.cyan::before { background: var(--info); }
        .stat-label { color: var(--muted); font-size: 0.8rem; margin-bottom: 0.375rem; }
        .stat-value { font-size: 1.75rem; font-weight: 700; }
        .stat-value.online { color: var(--success); }
        .stat-value.offline { color: var(--error); }
        
        /* Charts */
        .chart-container {
            position: relative;
            height: 250px;
            width: 100%;
        }
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        /* Tables */
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        th {
            background: var(--bg-secondary);
            color: var(--muted);
            font-weight: 600;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            position: sticky;
            top: 0;
        }
        tr:hover { background: rgba(59, 130, 246, 0.05); }
        
        /* Status indicators */
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 0.5rem;
        }
        .status-dot.online { background: var(--success); box-shadow: 0 0 8px var(--success); }
        .status-dot.offline { background: var(--error); }
        .status-dot.unknown { background: var(--muted); }
        
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.625rem;
            border-radius: 9999px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .badge.online { background: rgba(34, 197, 94, 0.2); color: var(--success); }
        .badge.offline { background: rgba(239, 68, 68, 0.2); color: var(--error); }
        .badge.unknown { background: rgba(148, 163, 184, 0.2); color: var(--muted); }
        .badge.running { background: rgba(34, 197, 94, 0.2); color: var(--success); }
        .badge.stopped { background: rgba(239, 68, 68, 0.2); color: var(--error); }
        .badge.static { background: rgba(59, 130, 246, 0.2); color: var(--primary); }
        .badge.dynamic { background: rgba(249, 115, 22, 0.2); color: var(--warning); }
        
        /* Buttons */
        .btn {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            border: none;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            transition: all 0.2s;
        }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-hover); }
        .btn-secondary { background: var(--border); color: var(--text); }
        .btn-secondary:hover { background: #475569; }
        .btn-success { background: var(--success); color: white; }
        .btn-danger { background: var(--error); color: white; }
        .btn-sm { padding: 0.375rem 0.75rem; font-size: 0.75rem; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .btn-group { display: flex; gap: 0.5rem; flex-wrap: wrap; }
        
        /* Forms */
        .form-group { margin-bottom: 1rem; }
        .form-group label {
            display: block;
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 0.375rem;
            color: var(--muted);
        }
        .form-input, .form-select {
            width: 100%;
            padding: 0.625rem 0.875rem;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: var(--bg);
            color: var(--text);
            font-size: 0.875rem;
            transition: border-color 0.2s;
        }
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
        }
        .form-input::placeholder { color: var(--muted); }
        .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
        .form-hint { font-size: 0.7rem; color: var(--muted); margin-top: 0.25rem; }
        
        /* Search */
        .search-box {
            display: flex;
            gap: 0.5rem;
            width: 100%;
            max-width: 300px;
        }
        .search-input {
            flex: 1;
            padding: 0.5rem 0.875rem;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: var(--bg);
            color: var(--text);
            font-size: 0.85rem;
        }
        .search-input:focus { outline: none; border-color: var(--primary); }
        
        /* IP Grid */
        .ip-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 0.375rem;
        }
        .ip-cell {
            padding: 0.375rem;
            border-radius: 6px;
            text-align: center;
            font-size: 0.7rem;
            font-family: 'SF Mono', Monaco, monospace;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.15s;
        }
        .ip-cell.online { background: rgba(34, 197, 94, 0.2); border-color: var(--success); }
        .ip-cell.offline { background: var(--card); opacity: 0.6; }
        .ip-cell:hover { transform: scale(1.05); z-index: 1; }
        .ip-cell .ip { font-weight: 600; }
        .ip-cell .hostname { font-size: 0.6rem; color: var(--muted); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        
        /* Host type filters */
        .filter-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        .filter-tab {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            background: var(--bg);
            border: 1px solid var(--border);
            color: var(--muted);
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .filter-tab.active { background: var(--primary); border-color: var(--primary); color: white; }
        .filter-tab:hover:not(.active) { border-color: var(--primary); }
        
        /* Record types */
        .record-type {
            display: inline-block;
            padding: 0.125rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            font-family: monospace;
        }
        .record-type.A { background: #3b82f6; color: white; }
        .record-type.AAAA { background: #8b5cf6; color: white; }
        .record-type.CNAME { background: #f59e0b; color: black; }
        .record-type.PTR { background: #10b981; color: white; }
        .record-type.MX { background: #ec4899; color: white; }
        .record-type.TXT { background: #6b7280; color: white; }
        .record-type.NS { background: #06b6d4; color: white; }
        
        /* Zone tabs */
        .zone-tabs { display: flex; gap: 0.375rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .zone-tab {
            padding: 0.375rem 0.75rem;
            border-radius: 6px;
            background: var(--bg);
            border: 1px solid var(--border);
            color: var(--muted);
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        .zone-tab.active { background: var(--primary); border-color: var(--primary); color: white; }
        
        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.75);
            z-index: 200;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        .modal-overlay.active { display: flex; }
        .modal {
            background: var(--card);
            border-radius: 16px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalIn 0.2s ease;
        }
        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.95) translateY(-10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        .modal-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-header h2 { font-size: 1.125rem; }
        .modal-close {
            background: none;
            border: none;
            color: var(--muted);
            font-size: 1.5rem;
            cursor: pointer;
            line-height: 1;
        }
        .modal-close:hover { color: var(--text); }
        .modal-body { padding: 1.5rem; }
        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }
        
        /* Settings */
        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: var(--bg);
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }
        .setting-label { font-weight: 500; font-size: 0.9rem; }
        .setting-desc { font-size: 0.8rem; color: var(--muted); margin-top: 0.125rem; }
        .setting-input {
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: var(--card);
            color: var(--text);
            width: 120px;
            text-align: right;
            font-size: 0.875rem;
        }
        
        /* Toggle */
        .toggle {
            width: 44px;
            height: 24px;
            background: var(--border);
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: background 0.2s;
        }
        .toggle.active { background: var(--primary); }
        .toggle::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: left 0.2s;
        }
        .toggle.active::after { left: 22px; }
        
        /* Loading & spinner */
        .loading { display: flex; align-items: center; justify-content: center; padding: 2rem; color: var(--muted); }
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 0.5rem;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* Toast notifications */
        .toast-container {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            z-index: 300;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .toast {
            background: var(--card);
            border: 1px solid var(--border);
            padding: 0.875rem 1.25rem;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: toastIn 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .toast.success { border-left: 3px solid var(--success); }
        .toast.error { border-left: 3px solid var(--error); }
        @keyframes toastIn {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            header { padding: 0.5rem 1rem; }
            .logo-text .slogan { display: none; }
            .scan-info { display: none; }
            .tabs { padding: 0.5rem 1rem; }
            main { padding: 1rem; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .chart-grid { grid-template-columns: 1fr; }
            th, td { padding: 0.5rem 0.75rem; font-size: 0.75rem; }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6"/>
                        <stop offset="100%" style="stop-color:#8b5cf6"/>
                    </linearGradient>
                </defs>
                <circle cx="50" cy="50" r="45" fill="url(#grad1)" opacity="0.2"/>
                <circle cx="50" cy="50" r="8" fill="url(#grad1)"/>
                <circle cx="50" cy="20" r="6" fill="url(#grad1)"/>
                <circle cx="80" cy="50" r="6" fill="url(#grad1)"/>
                <circle cx="50" cy="80" r="6" fill="url(#grad1)"/>
                <circle cx="20" cy="50" r="6" fill="url(#grad1)"/>
                <circle cx="75" cy="25" r="5" fill="url(#grad1)" opacity="0.7"/>
                <circle cx="75" cy="75" r="5" fill="url(#grad1)" opacity="0.7"/>
                <circle cx="25" cy="75" r="5" fill="url(#grad1)" opacity="0.7"/>
                <circle cx="25" cy="25" r="5" fill="url(#grad1)" opacity="0.7"/>
                <line x1="50" y1="50" x2="50" y2="20" stroke="url(#grad1)" stroke-width="2"/>
                <line x1="50" y1="50" x2="80" y2="50" stroke="url(#grad1)" stroke-width="2"/>
                <line x1="50" y1="50" x2="50" y2="80" stroke="url(#grad1)" stroke-width="2"/>
                <line x1="50" y1="50" x2="20" y2="50" stroke="url(#grad1)" stroke-width="2"/>
                <line x1="50" y1="50" x2="75" y2="25" stroke="url(#grad1)" stroke-width="1.5" opacity="0.7"/>
                <line x1="50" y1="50" x2="75" y2="75" stroke="url(#grad1)" stroke-width="1.5" opacity="0.7"/>
                <line x1="50" y1="50" x2="25" y2="75" stroke="url(#grad1)" stroke-width="1.5" opacity="0.7"/>
                <line x1="50" y1="50" x2="25" y2="25" stroke="url(#grad1)" stroke-width="1.5" opacity="0.7"/>
            </svg>
            <div class="logo-text">
                <h1>IntNetAdmin</h1>
                <div class="slogan" data-i18n="slogan">Manage your internal network with ease</div>
            </div>
        </div>
        <div class="header-actions">
            <button class="btn btn-warning" id="activate-changes-btn" style="display:none; background: var(--warning); margin-right: 1rem;">
                ‚ö° <span data-i18n="activate_changes">Activate Changes</span> (<span id="pending-count">0</span>)
            </button>
            <div class="scan-info">
                <div><span class="label" data-i18n="last_scan">Last scan:</span> <span class="value" id="header-last-scan">-</span></div>
                <div><span class="label" data-i18n="next_scan">Next scan:</span> <span class="value" id="header-next-scan">-</span></div>
            </div>
            <div class="lang-dropdown" style="position: relative;">
                <button class="lang-dropdown-btn" id="lang-dropdown-btn" style="background: var(--border); border: none; padding: 0.5rem 0.75rem; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; font-size: 0.9rem;">
                    <span id="current-lang-flag">üá¨üáß</span>
                    <span id="current-lang-name">English</span>
                    <span style="font-size: 0.7rem;">‚ñº</span>
                </button>
                <div class="lang-dropdown-menu" id="lang-dropdown-menu" style="display: none; position: absolute; top: 100%; right: 0; margin-top: 0.25rem; background: var(--card); border: 1px solid var(--border); border-radius: 8px; min-width: 180px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); z-index: 200; overflow: hidden;">
                    <div class="lang-option" data-lang="en" data-flag="üá¨üáß" data-name="English" style="padding: 0.625rem 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.75rem; transition: background 0.15s;">üá¨üáß English</div>
                    <div class="lang-option" data-lang="sv" data-flag="üá∏üá™" data-name="Svenska" style="padding: 0.625rem 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.75rem; transition: background 0.15s;">üá∏üá™ Svenska</div>
                    <div class="lang-option" data-lang="de" data-flag="üá©üá™" data-name="Deutsch" style="padding: 0.625rem 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.75rem; transition: background 0.15s;">üá©üá™ Deutsch</div>
                    <div class="lang-option" data-lang="fr" data-flag="üá´üá∑" data-name="Fran√ßais" style="padding: 0.625rem 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.75rem; transition: background 0.15s;">üá´üá∑ Fran√ßais</div>
                    <div class="lang-option" data-lang="es" data-flag="üá™üá∏" data-name="Espa√±ol" style="padding: 0.625rem 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.75rem; transition: background 0.15s;">üá™üá∏ Espa√±ol</div>
                    <div class="lang-option" data-lang="it" data-flag="üáÆüáπ" data-name="Italiano" style="padding: 0.625rem 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.75rem; transition: background 0.15s;">üáÆüáπ Italiano</div>
                    <div class="lang-option" data-lang="nl" data-flag="üá≥üá±" data-name="Nederlands" style="padding: 0.625rem 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.75rem; transition: background 0.15s;">üá≥üá± Nederlands</div>
                    <div class="lang-option" data-lang="pt" data-flag="üáµüáπ" data-name="Portugu√™s" style="padding: 0.625rem 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.75rem; transition: background 0.15s;">üáµüáπ Portugu√™s</div>
                    <div class="lang-option" data-lang="no" data-flag="üá≥üá¥" data-name="Norsk" style="padding: 0.625rem 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.75rem; transition: background 0.15s;">üá≥üá¥ Norsk</div>
                    <div class="lang-option" data-lang="da" data-flag="üá©üá∞" data-name="Dansk" style="padding: 0.625rem 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.75rem; transition: background 0.15s;">üá©üá∞ Dansk</div>
                </div>
            </div>
            <button class="theme-toggle" id="theme-toggle" title="Toggle theme">üåô</button>
            <div class="user-menu">
                <div class="user-info">
                    <span class="username" id="username">user</span>
                    <span class="sudo-badge" id="sudo-badge" style="display:none;">SUDO</span>
                </div>
                <a href="/logout" class="logout-btn" data-i18n="logout">Logout</a>
            </div>
        </div>
    </header>
    
    <nav class="tabs">
        <button class="tab active" data-view="dashboard">üìä <span data-i18n="dashboard">Dashboard</span></button>
        <button class="tab" data-view="dhcp">üîó <span data-i18n="dhcp">DHCP</span></button>
        <button class="tab" data-view="dns">üìç <span data-i18n="dns">DNS</span></button>
        <button class="tab" data-view="scanner">üì° <span data-i18n="scanner">IP Scanner</span></button>
        <button class="tab" data-view="leases">üìã <span data-i18n="leases">Leases</span></button>
        <button class="tab" data-view="networks">üåê <span data-i18n="networks">Networks</span></button>
        <button class="tab" data-view="settings">‚öôÔ∏è <span data-i18n="settings">Settings</span></button>
    </nav>
    
    <main>
        <!-- Dashboard View -->
        <div class="view active" id="dashboard-view">
            <div class="stats-grid">
                <div class="stat-card blue">
                    <div class="stat-label" data-i18n="static_hosts">Static Hosts</div>
                    <div class="stat-value" id="stat-static">-</div>
                </div>
                <div class="stat-card yellow">
                    <div class="stat-label" data-i18n="dynamic_hosts">Dynamic Hosts</div>
                    <div class="stat-value" id="stat-dynamic">-</div>
                </div>
                <div class="stat-card green">
                    <div class="stat-label" data-i18n="online_hosts">Online Hosts</div>
                    <div class="stat-value online" id="stat-online">-</div>
                </div>
                <div class="stat-card cyan">
                    <div class="stat-label" data-i18n="dns_zones">DNS Zones</div>
                    <div class="stat-value" id="stat-zones">-</div>
                </div>
                <div class="stat-card red">
                    <div class="stat-label" data-i18n="active_leases">Active Leases</div>
                    <div class="stat-value" id="stat-leases">-</div>
                </div>
            </div>
            
            <div class="chart-grid">
                <div class="card">
                    <div class="card-header">
                        <h2>üìà <span data-i18n="network_history">Network Status History</span></h2>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="history-chart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h2>ü•ß <span data-i18n="host_distribution">Host Distribution</span></h2>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="distribution-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>üñ•Ô∏è <span data-i18n="services">Services</span></h2>
                </div>
                <div class="card-body" id="services-list">
                    <div class="loading"><div class="spinner"></div> Loading...</div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>üè† <span data-i18n="recent_hosts">Recent Static Hosts</span></h2>
                </div>
                <div class="card-body no-padding">
                    <div class="table-container">
                        <table id="recent-hosts-table">
                            <thead>
                                <tr>
                                    <th data-i18n="status">Status</th>
                                    <th data-i18n="hostname">Hostname</th>
                                    <th data-i18n="mac_address">MAC Address</th>
                                    <th data-i18n="ip_address">IP Address</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- DHCP View -->
        <div class="view" id="dhcp-view">
            <div class="card">
                <div class="card-header">
                    <h2>üîó <span data-i18n="dhcp_static">DHCP Static Mappings</span></h2>
                    <div class="btn-group">
                        <div class="search-box">
                            <input type="text" class="search-input" id="dhcp-search" data-i18n-placeholder="search" placeholder="Search...">
                        </div>
                        <button class="btn btn-primary" onclick="showModal('add-dhcp-modal')">‚ûï <span data-i18n="add_host">Add Host</span></button>
                    </div>
                </div>
                <div class="card-body no-padding">
                    <div class="filter-tabs" style="padding: 1rem 1.25rem 0;">
                        <button class="filter-tab active" data-filter="all" data-i18n="all">All</button>
                        <button class="filter-tab" data-filter="online" data-i18n="online">Online</button>
                        <button class="filter-tab" data-filter="offline" data-i18n="offline">Offline</button>
                    </div>
                    <div class="table-container">
                        <table id="dhcp-table">
                            <thead>
                                <tr>
                                    <th data-i18n="status">Status</th>
                                    <th data-i18n="hostname">Hostname</th>
                                    <th data-i18n="mac_address">MAC Address</th>
                                    <th data-i18n="ip_address">IP Address</th>
                                    <th data-i18n="type">Type</th>
                                    <th data-i18n="actions">Actions</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>‚öôÔ∏è <span data-i18n="dhcp_options">DHCP Global Options</span></h2>
                </div>
                <div class="card-body" id="dhcp-options"></div>
            </div>
        </div>
        
        <!-- DNS View -->
        <div class="view" id="dns-view">
            <div class="card">
                <div class="card-header">
                    <h2>üìç <span data-i18n="dns_zones">DNS Zones</span></h2>
                    <button class="btn btn-primary" onclick="showModal('add-zone-modal')">‚ûï <span data-i18n="add_zone">Add Zone</span></button>
                </div>
                <div class="card-body">
                    <div class="zone-tabs" id="zone-tabs"></div>
                    <div class="search-box" style="margin-bottom: 1rem;">
                        <input type="text" class="search-input" id="dns-search" data-i18n-placeholder="search" placeholder="Search records...">
                    </div>
                    <div class="table-container">
                        <table id="dns-table">
                            <thead>
                                <tr>
                                    <th data-i18n="status">Status</th>
                                    <th data-i18n="name">Name</th>
                                    <th data-i18n="type">Type</th>
                                    <th data-i18n="value">Value</th>
                                    <th data-i18n="actions">Actions</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Scanner View -->
        <div class="view" id="scanner-view">
            <div class="card">
                <div class="card-header">
                    <h2>üì° <span data-i18n="ip_scanner">IP Scanner</span> (<span id="scanner-network">192.168.2.0/23</span>)</h2>
                    <div class="btn-group">
                        <span id="scan-status" style="color: var(--muted); font-size: 0.85rem;"></span>
                        <button class="btn btn-primary" id="start-scan-btn">üîÑ <span data-i18n="start_scan">Start Scan</span></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="stats-grid" style="margin-bottom: 1.5rem;">
                        <div class="stat-card green">
                            <div class="stat-label" data-i18n="online">Online</div>
                            <div class="stat-value online" id="scan-online">-</div>
                        </div>
                        <div class="stat-card red">
                            <div class="stat-label" data-i18n="offline">Offline</div>
                            <div class="stat-value offline" id="scan-offline">-</div>
                        </div>
                        <div class="stat-card cyan">
                            <div class="stat-label" data-i18n="total">Total</div>
                            <div class="stat-value" id="scan-total">-</div>
                        </div>
                        <div class="stat-card blue">
                            <div class="stat-label" data-i18n="last_scan">Last Scan</div>
                            <div class="stat-value" id="scan-time" style="font-size: 0.9rem;">-</div>
                        </div>
                    </div>
                    <div class="ip-grid" id="ip-grid"></div>
                </div>
            </div>
        </div>
        
        <!-- Leases View -->
        <div class="view" id="leases-view">
            <div class="card">
                <div class="card-header">
                    <h2>üìã <span data-i18n="dhcp_leases">DHCP Leases</span></h2>
                    <button class="btn btn-secondary" id="refresh-leases-btn">üîÑ <span data-i18n="refresh">Refresh</span></button>
                </div>
                <div class="card-body no-padding">
                    <div class="filter-tabs" style="padding: 1rem 1.25rem 0;">
                        <button class="filter-tab active" data-filter="all" data-i18n="all">All</button>
                        <button class="filter-tab" data-filter="active" data-i18n="active">Active</button>
                        <button class="filter-tab" data-filter="online" data-i18n="online">Online</button>
                    </div>
                    <div class="table-container">
                        <table id="leases-table">
                            <thead>
                                <tr>
                                    <th data-i18n="status">Status</th>
                                    <th data-i18n="ip_address">IP Address</th>
                                    <th data-i18n="mac_address">MAC Address</th>
                                    <th data-i18n="hostname">Hostname</th>
                                    <th data-i18n="ends">Expires</th>
                                    <th data-i18n="state">State</th>
                                    <th data-i18n="actions">Actions</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Networks View -->
        <div class="view" id="networks-view">
            <div class="card">
                <div class="card-header">
                    <h2>üåê <span data-i18n="network_config">Network Configuration</span></h2>
                    <button class="btn btn-primary" onclick="showModal('add-network-modal')">‚ûï <span data-i18n="add_network">Add Network</span></button>
                </div>
                <div class="card-body no-padding">
                    <div class="table-container">
                        <table id="networks-table">
                            <thead>
                                <tr>
                                    <th data-i18n="network">Network</th>
                                    <th data-i18n="netmask">Netmask</th>
                                    <th data-i18n="range">DHCP Range</th>
                                    <th data-i18n="gateway">Gateway</th>
                                    <th data-i18n="dns">DNS</th>
                                    <th data-i18n="actions">Actions</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Settings View -->
        <div class="view" id="settings-view">
            <div class="card">
                <div class="card-header">
                    <h2>üîê <span data-i18n="sudo_access">Sudo Access</span></h2>
                </div>
                <div class="card-body">
                    <p style="color: var(--muted); margin-bottom: 1rem; font-size: 0.875rem;" data-i18n="sudo_desc">
                        Enter your sudo password to enable write operations (adding hosts, zones, etc.). 
                        Password is stored in session memory only and never saved to disk.
                    </p>
                    <div id="sudo-status">
                        <div class="form-row">
                            <div class="form-group">
                                <label data-i18n="sudo_password">Sudo Password</label>
                                <input type="password" class="form-input" id="sudo-password-input" placeholder="Enter sudo password">
                            </div>
                            <div class="form-group" style="display: flex; align-items: flex-end; gap: 0.5rem;">
                                <button class="btn btn-primary" id="set-sudo-btn" data-i18n="authorize">Authorize</button>
                                <button class="btn btn-danger" id="clear-sudo-btn" style="display: none;" data-i18n="revoke">Revoke</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>‚öôÔ∏è <span data-i18n="scan_settings">Scanner Settings</span></h2>
                </div>
                <div class="card-body">
                    <div class="setting-row">
                        <div>
                            <div class="setting-label" data-i18n="scan_interval">Scan Interval</div>
                            <div class="setting-desc" data-i18n="scan_interval_desc">How often to scan the network (seconds)</div>
                        </div>
                        <input type="number" class="setting-input" id="setting-scan-interval" value="7200" min="60" step="60">
                    </div>
                    <div class="setting-row">
                        <div>
                            <div class="setting-label" data-i18n="ping_timeout">Ping Timeout</div>
                            <div class="setting-desc" data-i18n="ping_timeout_desc">Timeout for ping requests (seconds)</div>
                        </div>
                        <input type="number" class="setting-input" id="setting-ping-timeout" value="1" min="1" max="10">
                    </div>
                    <div class="setting-row">
                        <div>
                            <div class="setting-label" data-i18n="network_range">Network Range</div>
                            <div class="setting-desc" data-i18n="network_range_desc">Select from predefined networks</div>
                        </div>
                        <select class="setting-input" id="setting-network" style="width: 180px;">
                            <!-- Populated by JavaScript -->
                        </select>
                    </div>
                    <div class="setting-row">
                        <div>
                            <div class="setting-label" data-i18n="max_threads">Max Threads</div>
                            <div class="setting-desc" data-i18n="max_threads_desc">Concurrent ping threads</div>
                        </div>
                        <input type="number" class="setting-input" id="setting-max-threads" value="100" min="10" max="500">
                    </div>
                    <div style="margin-top: 1rem;">
                        <button class="btn btn-primary" id="save-settings-btn" data-i18n="save_settings">Save Settings</button>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>üé® <span data-i18n="appearance">Appearance</span></h2>
                </div>
                <div class="card-body">
                    <div class="setting-row">
                        <div>
                            <div class="setting-label" data-i18n="dark_mode">Dark Mode</div>
                            <div class="setting-desc" data-i18n="dark_mode_desc">Toggle dark/light theme</div>
                        </div>
                        <div class="toggle active" id="theme-toggle-setting"></div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>‚ÑπÔ∏è <span data-i18n="about">About</span></h2>
                </div>
                <div class="card-body">
                    <p style="color: var(--muted); font-size: 0.875rem;">
                        <strong>IntNetAdmin</strong> v1.0.0<br>
                        <span data-i18n="slogan">Manage your internal network with ease</span><br><br>
                        ¬© 2026 Daniel Nylander<br>
                        Licensed under <a href="https://www.gnu.org/licenses/gpl-3.0.html" target="_blank" style="color: var(--primary);">GPL-3.0</a>
                    </p>
                    <div style="margin-top: 1rem;">
                        <a href="https://github.com/yeager/IntNetAdmin" target="_blank" style="display: inline-flex; align-items: center; gap: 0.5rem; color: var(--text); text-decoration: none; padding: 0.5rem 1rem; background: var(--bg); border-radius: 6px; border: 1px solid var(--border);">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                            <span>View on GitHub</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Add DHCP Host Modal -->
    <div class="modal-overlay" id="add-dhcp-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 data-i18n="add_dhcp_host">Add DHCP Static Host</h2>
                <button class="modal-close" onclick="hideModal('add-dhcp-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label data-i18n="hostname">Hostname</label>
                    <input type="text" class="form-input" id="new-host-name" placeholder="server01">
                    <div class="form-hint" data-i18n="hostname_hint">Alphanumeric, hyphens allowed</div>
                </div>
                <div class="form-group">
                    <label data-i18n="mac_address">MAC Address</label>
                    <input type="text" class="form-input" id="new-host-mac" placeholder="00:11:22:33:44:55">
                    <div class="form-hint" data-i18n="mac_hint">Format: XX:XX:XX:XX:XX:XX</div>
                </div>
                <div class="form-group">
                    <label data-i18n="ip_address">IP Address</label>
                    <input type="text" class="form-input" id="new-host-ip" placeholder="192.168.2.100">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('add-dhcp-modal')" data-i18n="cancel">Cancel</button>
                <button class="btn btn-primary" onclick="addDhcpHost()" data-i18n="add_host">Add Host</button>
            </div>
        </div>
    </div>
    
    <!-- Add DNS Zone Modal -->
    <div class="modal-overlay" id="add-zone-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 data-i18n="add_dns_zone">Add DNS Zone</h2>
                <button class="modal-close" onclick="hideModal('add-zone-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label data-i18n="zone_name">Zone Name</label>
                    <input type="text" class="form-input" id="new-zone-name" placeholder="example.local">
                </div>
                <div class="form-group">
                    <label data-i18n="soa_ns">Primary Nameserver</label>
                    <input type="text" class="form-input" id="new-zone-ns" placeholder="ns1.example.local">
                </div>
                <div class="form-group">
                    <label data-i18n="soa_email">Admin Email</label>
                    <input type="text" class="form-input" id="new-zone-email" placeholder="admin@example.local">
                </div>
                <div class="form-group">
                    <label data-i18n="ttl">Default TTL (seconds)</label>
                    <input type="number" class="form-input" id="new-zone-ttl" value="86400">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('add-zone-modal')" data-i18n="cancel">Cancel</button>
                <button class="btn btn-primary" onclick="addDnsZone()" data-i18n="add_zone">Add Zone</button>
            </div>
        </div>
    </div>
    
    <!-- Add Network Modal -->
    <div class="modal-overlay" id="add-network-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 data-i18n="add_network">Add Network</h2>
                <button class="modal-close" onclick="hideModal('add-network-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="network">Network Address</label>
                        <input type="text" class="form-input" id="new-net-address" placeholder="192.168.10.0">
                    </div>
                    <div class="form-group">
                        <label data-i18n="netmask">Netmask</label>
                        <input type="text" class="form-input" id="new-net-mask" placeholder="255.255.255.0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="range_start">DHCP Range Start</label>
                        <input type="text" class="form-input" id="new-net-start" placeholder="192.168.10.100">
                    </div>
                    <div class="form-group">
                        <label data-i18n="range_end">DHCP Range End</label>
                        <input type="text" class="form-input" id="new-net-end" placeholder="192.168.10.200">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="gateway">Gateway</label>
                        <input type="text" class="form-input" id="new-net-gateway" placeholder="192.168.10.1">
                    </div>
                    <div class="form-group">
                        <label data-i18n="dns">DNS Server</label>
                        <input type="text" class="form-input" id="new-net-dns" placeholder="192.168.10.1">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('add-network-modal')" data-i18n="cancel">Cancel</button>
                <button class="btn btn-primary" onclick="addNetwork()" data-i18n="add_network">Add Network</button>
            </div>
        </div>
    </div>
    
    <!-- Edit DHCP Host Modal -->
    <div class="modal-overlay" id="edit-dhcp-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 data-i18n="edit_dhcp_host">Edit DHCP Host</h2>
                <button class="modal-close" onclick="hideModal('edit-dhcp-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="edit-host-original-name">
                <div class="form-group">
                    <label data-i18n="hostname">Hostname</label>
                    <input type="text" class="form-input" id="edit-host-name" disabled>
                </div>
                <div class="form-group">
                    <label data-i18n="mac_address">MAC Address</label>
                    <input type="text" class="form-input" id="edit-host-mac" placeholder="00:11:22:33:44:55">
                </div>
                <div class="form-group">
                    <label data-i18n="ip_address">IP Address</label>
                    <input type="text" class="form-input" id="edit-host-ip" placeholder="192.168.2.100">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('edit-dhcp-modal')" data-i18n="cancel">Cancel</button>
                <button class="btn btn-primary" onclick="saveDhcpHost()" data-i18n="save">Save</button>
            </div>
        </div>
    </div>
    
    <!-- Edit DNS Record Modal -->
    <div class="modal-overlay" id="edit-dns-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 data-i18n="edit_dns_record">Edit DNS Record</h2>
                <button class="modal-close" onclick="hideModal('edit-dns-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="edit-dns-zone">
                <input type="hidden" id="edit-dns-original-name">
                <input type="hidden" id="edit-dns-original-type">
                <div class="form-group">
                    <label data-i18n="name">Name</label>
                    <input type="text" class="form-input" id="edit-dns-name" disabled>
                </div>
                <div class="form-group">
                    <label data-i18n="type">Type</label>
                    <input type="text" class="form-input" id="edit-dns-type" disabled>
                </div>
                <div class="form-group">
                    <label data-i18n="value">Value</label>
                    <input type="text" class="form-input" id="edit-dns-value">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('edit-dns-modal')" data-i18n="cancel">Cancel</button>
                <button class="btn btn-primary" onclick="saveDnsRecord()" data-i18n="save">Save</button>
            </div>
        </div>
    </div>
    
    <!-- Edit Network Modal -->
    <div class="modal-overlay" id="edit-network-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 data-i18n="edit_network">Edit Network</h2>
                <button class="modal-close" onclick="hideModal('edit-network-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="edit-net-address">
                <div class="form-group">
                    <label data-i18n="network">Network Address</label>
                    <input type="text" class="form-input" id="edit-net-display" disabled>
                </div>
                <div class="form-group">
                    <label data-i18n="netmask">Netmask</label>
                    <input type="text" class="form-input" id="edit-net-mask" placeholder="255.255.255.0">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="range_start">DHCP Range Start</label>
                        <input type="text" class="form-input" id="edit-net-start" placeholder="192.168.10.100">
                    </div>
                    <div class="form-group">
                        <label data-i18n="range_end">DHCP Range End</label>
                        <input type="text" class="form-input" id="edit-net-end" placeholder="192.168.10.200">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="gateway">Gateway</label>
                        <input type="text" class="form-input" id="edit-net-gateway" placeholder="192.168.10.1">
                    </div>
                    <div class="form-group">
                        <label data-i18n="dns">DNS Server</label>
                        <input type="text" class="form-input" id="edit-net-dns" placeholder="192.168.10.1">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('edit-network-modal')" data-i18n="cancel">Cancel</button>
                <button class="btn btn-primary" onclick="saveNetwork()" data-i18n="save">Save</button>
            </div>
        </div>
    </div>
    
    <!-- Promote Lease to Static Modal -->
    <div class="modal-overlay" id="promote-lease-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>üìå <span data-i18n="make_static">Make Static</span></h2>
                <button class="modal-close" onclick="hideModal('promote-lease-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--muted); margin-bottom: 1rem; font-size: 0.875rem;" data-i18n="promote_desc">
                    Create a static DHCP reservation and optionally add DNS records for this lease.
                </p>
                <input type="hidden" id="promote-ip">
                <input type="hidden" id="promote-mac">
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="ip_address">IP Address</label>
                        <input type="text" class="form-input" id="promote-ip-display" disabled>
                    </div>
                    <div class="form-group">
                        <label data-i18n="mac_address">MAC Address</label>
                        <input type="text" class="form-input" id="promote-mac-display" disabled>
                    </div>
                </div>
                <div class="form-group">
                    <label data-i18n="hostname">Hostname</label>
                    <input type="text" class="form-input" id="promote-hostname" placeholder="myserver">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="dns_zone">DNS Zone (optional)</label>
                        <select class="form-input" id="promote-zone">
                            <option value="">-- No DNS --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="fqdn">FQDN</label>
                        <input type="text" class="form-input" id="promote-fqdn" placeholder="myserver.home.lan" disabled>
                    </div>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="promote-ptr">
                        <span data-i18n="create_ptr">Create PTR record (reverse DNS)</span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('promote-lease-modal')" data-i18n="cancel">Cancel</button>
                <button class="btn btn-primary" onclick="promoteLease()" data-i18n="make_static">Make Static</button>
            </div>
        </div>
    </div>
    
    <!-- Activate Changes Modal -->
    <div class="modal-overlay" id="activate-modal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h2>‚ö° <span data-i18n="activate_changes">Activate Changes</span></h2>
                <button class="modal-close" onclick="hideModal('activate-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--muted); margin-bottom: 1rem;" data-i18n="activate_desc">
                    The following changes will be written to disk. This action requires sudo privileges.
                </p>
                <div id="changes-preview" style="background: var(--bg); border-radius: 8px; padding: 1rem; font-family: monospace; font-size: 0.85rem; max-height: 300px; overflow-y: auto;">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="discardChanges()" data-i18n="discard">Discard All</button>
                <button class="btn btn-secondary" onclick="hideModal('activate-modal')" data-i18n="cancel">Cancel</button>
                <button class="btn btn-success" onclick="applyChanges()" data-i18n="apply">Apply Changes</button>
            </div>
        </div>
    </div>
    
    <!-- Sudo Required Modal -->
    <div class="modal-overlay" id="sudo-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 data-i18n="sudo_required">Sudo Password Required</h2>
                <button class="modal-close" onclick="hideModal('sudo-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--muted); margin-bottom: 1rem; font-size: 0.875rem;" data-i18n="sudo_modal_desc">
                    This action requires sudo privileges. Enter your password to continue.
                </p>
                <div class="form-group">
                    <label data-i18n="sudo_password">Sudo Password</label>
                    <input type="password" class="form-input" id="sudo-modal-password">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('sudo-modal')" data-i18n="cancel">Cancel</button>
                <button class="btn btn-primary" id="sudo-modal-submit" data-i18n="authorize">Authorize</button>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>
    
    <script>
        // ========================================================================
        // Translations
        // ========================================================================
        const translations = {
            en: {
                slogan: 'Manage your internal network with ease',
                dashboard: 'Dashboard',
                dhcp: 'DHCP',
                dns: 'DNS',
                scanner: 'IP Scanner',
                leases: 'Leases',
                networks: 'Networks',
                settings: 'Settings',
                logout: 'Logout',
                static_hosts: 'Static Hosts',
                dynamic_hosts: 'Dynamic Hosts',
                dns_zones: 'DNS Zones',
                online_hosts: 'Online Hosts',
                active_leases: 'Active Leases',
                services: 'Services',
                recent_hosts: 'Recent Static Hosts',
                hostname: 'Hostname',
                mac_address: 'MAC Address',
                ip_address: 'IP Address',
                status: 'Status',
                type: 'Type',
                dhcp_static: 'DHCP Static Mappings',
                dhcp_options: 'DHCP Global Options',
                dhcp_leases: 'DHCP Leases',
                search: 'Search...',
                name: 'Name',
                value: 'Value',
                ip_scanner: 'IP Scanner',
                start_scan: 'Start Scan',
                online: 'Online',
                offline: 'Offline',
                total: 'Total',
                last_scan: 'Last scan',
                next_scan: 'Next scan',
                refresh: 'Refresh',
                ends: 'Expires',
                state: 'State',
                all: 'All',
                active: 'Active',
                network_config: 'Network Configuration',
                network: 'Network',
                netmask: 'Netmask',
                range: 'DHCP Range',
                gateway: 'Gateway',
                sudo_access: 'Sudo Access',
                sudo_desc: 'Enter your sudo password to enable write operations. Password is stored in session memory only.',
                sudo_password: 'Sudo Password',
                authorize: 'Authorize',
                revoke: 'Revoke',
                scan_settings: 'Scanner Settings',
                scan_interval: 'Scan Interval',
                scan_interval_desc: 'How often to scan the network (seconds)',
                ping_timeout: 'Ping Timeout',
                ping_timeout_desc: 'Timeout for ping requests (seconds)',
                network_range: 'Network Range',
                network_range_desc: 'CIDR notation (e.g., 192.168.1.0/24)',
                max_threads: 'Max Threads',
                max_threads_desc: 'Concurrent ping threads',
                save_settings: 'Save Settings',
                appearance: 'Appearance',
                dark_mode: 'Dark Mode',
                dark_mode_desc: 'Toggle dark/light theme',
                about: 'About',
                add_host: 'Add Host',
                add_zone: 'Add Zone',
                add_network: 'Add Network',
                add_dhcp_host: 'Add DHCP Static Host',
                add_dns_zone: 'Add DNS Zone',
                cancel: 'Cancel',
                hostname_hint: 'Alphanumeric, hyphens allowed',
                mac_hint: 'Format: XX:XX:XX:XX:XX:XX',
                zone_name: 'Zone Name',
                soa_ns: 'Primary Nameserver',
                soa_email: 'Admin Email',
                ttl: 'Default TTL (seconds)',
                range_start: 'DHCP Range Start',
                range_end: 'DHCP Range End',
                sudo_required: 'Sudo Password Required',
                sudo_modal_desc: 'This action requires sudo privileges.',
                running: 'Running',
                stopped: 'Stopped',
                restart: 'Restart',
                scanning: 'Scanning...',
                never: 'Never',
                network_history: 'Network Status History',
                host_distribution: 'Host Distribution',
                static: 'Static',
                dynamic: 'Dynamic',
                success: 'Success',
                error: 'Error',
                host_added: 'Host added successfully',
                zone_created: 'Zone created successfully',
                settings_saved: 'Settings saved',
                sudo_authorized: 'Sudo access granted',
                sudo_revoked: 'Sudo access revoked',
                actions: 'Actions',
                edit: 'Edit',
                delete: 'Delete',
                save: 'Save',
                discard: 'Discard',
                apply: 'Apply',
                activate_changes: 'Activate Changes',
                activate_desc: 'The following changes will be written to disk.',
                edit_dhcp_host: 'Edit DHCP Host',
                edit_dns_record: 'Edit DNS Record',
                changes_applied: 'Changes applied successfully',
                changes_discarded: 'Changes discarded',
                change_staged: 'Change staged for activation',
                confirm_delete: 'Are you sure you want to delete this?',
                make_static: 'Make Static',
                promote_desc: 'Create a static DHCP reservation and optionally add DNS records.',
                dns_zone: 'DNS Zone',
                fqdn: 'FQDN',
                create_ptr: 'Create PTR record (reverse DNS)',
                hostname_required: 'Hostname is required',
                dhcp_staged: 'DHCP reservation staged',
                dns_staged: 'DNS record staged',
                ptr_staged: 'PTR record staged',
                edit_network: 'Edit Network'
            },
            sv: {
                slogan: 'Hantera ditt interna n√§tverk enkelt',
                dashboard: '√ñversikt',
                dhcp: 'DHCP',
                dns: 'DNS',
                scanner: 'IP-skanner',
                leases: 'L√•n',
                networks: 'N√§tverk',
                settings: 'Inst√§llningar',
                logout: 'Logga ut',
                static_hosts: 'Statiska v√§rdar',
                dynamic_hosts: 'Dynamiska v√§rdar',
                dns_zones: 'DNS-zoner',
                online_hosts: 'Online-v√§rdar',
                active_leases: 'Aktiva l√•n',
                services: 'Tj√§nster',
                recent_hosts: 'Senaste statiska v√§rdar',
                hostname: 'V√§rdnamn',
                mac_address: 'MAC-adress',
                ip_address: 'IP-adress',
                status: 'Status',
                type: 'Typ',
                dhcp_static: 'DHCP statiska mappningar',
                dhcp_options: 'DHCP globala alternativ',
                dhcp_leases: 'DHCP-l√•n',
                search: 'S√∂k...',
                name: 'Namn',
                value: 'V√§rde',
                ip_scanner: 'IP-skanner',
                start_scan: 'Starta skanning',
                online: 'Online',
                offline: 'Offline',
                total: 'Totalt',
                last_scan: 'Senaste skanning',
                next_scan: 'N√§sta skanning',
                refresh: 'Uppdatera',
                ends: 'Utg√•r',
                state: 'Status',
                all: 'Alla',
                active: 'Aktiv',
                network_config: 'N√§tverkskonfiguration',
                network: 'N√§tverk',
                netmask: 'N√§tmask',
                range: 'DHCP-intervall',
                gateway: 'Gateway',
                sudo_access: 'Sudo-√•tkomst',
                sudo_desc: 'Ange ditt sudo-l√∂senord f√∂r att aktivera skrivoperationer. L√∂senord lagras endast i sessionsminnet.',
                sudo_password: 'Sudo-l√∂senord',
                authorize: 'Auktorisera',
                revoke: '√Öterkalla',
                scan_settings: 'Skannerinst√§llningar',
                scan_interval: 'Skanningsintervall',
                scan_interval_desc: 'Hur ofta n√§tverket skannas (sekunder)',
                ping_timeout: 'Ping-timeout',
                ping_timeout_desc: 'Timeout f√∂r ping-f√∂rfr√•gningar (sekunder)',
                network_range: 'N√§tverksomf√•ng',
                network_range_desc: 'CIDR-notation (t.ex. 192.168.1.0/24)',
                max_threads: 'Max tr√•dar',
                max_threads_desc: 'Samtidiga ping-tr√•dar',
                save_settings: 'Spara inst√§llningar',
                appearance: 'Utseende',
                dark_mode: 'M√∂rkt l√§ge',
                dark_mode_desc: 'V√§xla mellan m√∂rkt/ljust tema',
                about: 'Om',
                add_host: 'L√§gg till v√§rd',
                add_zone: 'L√§gg till zon',
                add_network: 'L√§gg till n√§tverk',
                add_dhcp_host: 'L√§gg till DHCP statisk v√§rd',
                add_dns_zone: 'L√§gg till DNS-zon',
                cancel: 'Avbryt',
                hostname_hint: 'Alfanumeriskt, bindestreck till√•tet',
                mac_hint: 'Format: XX:XX:XX:XX:XX:XX',
                zone_name: 'Zonnamn',
                soa_ns: 'Prim√§r namnserver',
                soa_email: 'Admin e-post',
                ttl: 'Standard TTL (sekunder)',
                range_start: 'DHCP-intervall start',
                range_end: 'DHCP-intervall slut',
                sudo_required: 'Sudo-l√∂senord kr√§vs',
                sudo_modal_desc: 'Denna √•tg√§rd kr√§ver sudo-beh√∂righet.',
                running: 'K√∂rs',
                stopped: 'Stoppad',
                restart: 'Starta om',
                scanning: 'Skannar...',
                never: 'Aldrig',
                network_history: 'N√§tverksstatushistorik',
                host_distribution: 'V√§rdf√∂rdelning',
                static: 'Statisk',
                dynamic: 'Dynamisk',
                success: 'Klart',
                error: 'Fel',
                host_added: 'V√§rd tillagd',
                zone_created: 'Zon skapad',
                settings_saved: 'Inst√§llningar sparade',
                sudo_authorized: 'Sudo-√•tkomst beviljad',
                sudo_revoked: 'Sudo-√•tkomst √•terkallad',
                actions: '√Ötg√§rder',
                edit: 'Redigera',
                delete: 'Ta bort',
                save: 'Spara',
                discard: 'Kasta',
                apply: 'Verkst√§ll',
                activate_changes: 'Aktivera √§ndringar',
                activate_desc: 'F√∂ljande √§ndringar kommer skrivas till disk.',
                edit_dhcp_host: 'Redigera DHCP-v√§rd',
                edit_dns_record: 'Redigera DNS-post',
                changes_applied: '√Ñndringar verkst√§llda',
                changes_discarded: '√Ñndringar kastade',
                change_staged: '√Ñndring f√∂rberedd f√∂r aktivering',
                confirm_delete: '√Ñr du s√§ker p√• att du vill ta bort detta?',
                make_static: 'G√∂r statisk',
                promote_desc: 'Skapa en statisk DHCP-reservation och l√§gg valfritt till DNS-poster.',
                dns_zone: 'DNS-zon',
                fqdn: 'FQDN',
                create_ptr: 'Skapa PTR-post (omv√§nd DNS)',
                hostname_required: 'V√§rdnamn kr√§vs',
                dhcp_staged: 'DHCP-reservation f√∂rberedd',
                dns_staged: 'DNS-post f√∂rberedd',
                ptr_staged: 'PTR-post f√∂rberedd',
                edit_network: 'Redigera n√§tverk'
            },
            de: {
                slogan: 'Verwalten Sie Ihr internes Netzwerk mit Leichtigkeit',
                dashboard: 'Dashboard', dhcp: 'DHCP', dns: 'DNS', scanner: 'IP-Scanner',
                leases: 'Leases', networks: 'Netzwerke', settings: 'Einstellungen', logout: 'Abmelden',
                static_hosts: 'Statische Hosts', dynamic_hosts: 'Dynamische Hosts', dns_zones: 'DNS-Zonen',
                online_hosts: 'Online-Hosts', active_leases: 'Aktive Leases', services: 'Dienste',
                recent_hosts: 'Neueste statische Hosts', hostname: 'Hostname', mac_address: 'MAC-Adresse',
                ip_address: 'IP-Adresse', status: 'Status', type: 'Typ', dhcp_static: 'DHCP Statische Zuordnungen',
                dhcp_options: 'DHCP Globale Optionen', dhcp_leases: 'DHCP Leases', search: 'Suchen...',
                name: 'Name', value: 'Wert', ip_scanner: 'IP-Scanner', start_scan: 'Scan starten',
                online: 'Online', offline: 'Offline', total: 'Gesamt', last_scan: 'Letzter Scan',
                next_scan: 'N√§chster Scan', refresh: 'Aktualisieren', ends: 'L√§uft ab', state: 'Zustand',
                all: 'Alle', active: 'Aktiv', network_config: 'Netzwerkkonfiguration', network: 'Netzwerk',
                netmask: 'Netzmaske', range: 'DHCP-Bereich', gateway: 'Gateway', sudo_access: 'Sudo-Zugang',
                sudo_desc: 'Geben Sie Ihr Sudo-Passwort ein, um Schreiboperationen zu aktivieren.',
                sudo_password: 'Sudo-Passwort', authorize: 'Autorisieren', revoke: 'Widerrufen',
                scan_settings: 'Scanner-Einstellungen', scan_interval: 'Scan-Intervall',
                scan_interval_desc: 'Wie oft das Netzwerk gescannt wird (Sekunden)',
                ping_timeout: 'Ping-Timeout', ping_timeout_desc: 'Timeout f√ºr Ping-Anfragen (Sekunden)',
                network_range: 'Netzwerkbereich', network_range_desc: 'CIDR-Notation (z.B. 192.168.1.0/24)',
                max_threads: 'Max. Threads', max_threads_desc: 'Gleichzeitige Ping-Threads',
                save_settings: 'Einstellungen speichern', appearance: 'Erscheinung', dark_mode: 'Dunkler Modus',
                dark_mode_desc: 'Dunkles/helles Theme umschalten', about: '√úber', add_host: 'Host hinzuf√ºgen',
                add_zone: 'Zone hinzuf√ºgen', add_network: 'Netzwerk hinzuf√ºgen', add_dhcp_host: 'DHCP Statischen Host hinzuf√ºgen',
                add_dns_zone: 'DNS-Zone hinzuf√ºgen', cancel: 'Abbrechen', hostname_hint: 'Alphanumerisch, Bindestriche erlaubt',
                mac_hint: 'Format: XX:XX:XX:XX:XX:XX', zone_name: 'Zonenname', soa_ns: 'Prim√§rer Nameserver',
                soa_email: 'Admin E-Mail', ttl: 'Standard TTL (Sekunden)', range_start: 'DHCP-Bereich Start',
                range_end: 'DHCP-Bereich Ende', sudo_required: 'Sudo-Passwort erforderlich',
                sudo_modal_desc: 'Diese Aktion erfordert Sudo-Rechte.', running: 'L√§uft', stopped: 'Gestoppt',
                restart: 'Neustart', scanning: 'Scanne...', never: 'Nie', network_history: 'Netzwerkstatus-Verlauf',
                host_distribution: 'Host-Verteilung', static: 'Statisch', dynamic: 'Dynamisch', success: 'Erfolg',
                error: 'Fehler', host_added: 'Host hinzugef√ºgt', zone_created: 'Zone erstellt',
                settings_saved: 'Einstellungen gespeichert', sudo_authorized: 'Sudo-Zugang gew√§hrt',
                sudo_revoked: 'Sudo-Zugang widerrufen', actions: 'Aktionen', edit: 'Bearbeiten', delete: 'L√∂schen',
                save: 'Speichern', discard: 'Verwerfen', apply: 'Anwenden', activate_changes: '√Ñnderungen aktivieren',
                activate_desc: 'Die folgenden √Ñnderungen werden auf die Festplatte geschrieben.',
                edit_dhcp_host: 'DHCP-Host bearbeiten', edit_dns_record: 'DNS-Eintrag bearbeiten',
                changes_applied: '√Ñnderungen angewendet', changes_discarded: '√Ñnderungen verworfen',
                change_staged: '√Ñnderung f√ºr Aktivierung vorbereitet', confirm_delete: 'Sind Sie sicher, dass Sie dies l√∂schen m√∂chten?'
            },
            fr: {
                slogan: 'G√©rez votre r√©seau interne facilement',
                dashboard: 'Tableau de bord', dhcp: 'DHCP', dns: 'DNS', scanner: 'Scanner IP',
                leases: 'Baux', networks: 'R√©seaux', settings: 'Param√®tres', logout: 'D√©connexion',
                static_hosts: 'H√¥tes statiques', dynamic_hosts: 'H√¥tes dynamiques', dns_zones: 'Zones DNS',
                online_hosts: 'H√¥tes en ligne', active_leases: 'Baux actifs', services: 'Services',
                recent_hosts: 'H√¥tes statiques r√©cents', hostname: "Nom d'h√¥te", mac_address: 'Adresse MAC',
                ip_address: 'Adresse IP', status: 'Statut', type: 'Type', dhcp_static: 'Mappages statiques DHCP',
                dhcp_options: 'Options globales DHCP', dhcp_leases: 'Baux DHCP', search: 'Rechercher...',
                name: 'Nom', value: 'Valeur', ip_scanner: 'Scanner IP', start_scan: 'D√©marrer le scan',
                online: 'En ligne', offline: 'Hors ligne', total: 'Total', last_scan: 'Dernier scan',
                next_scan: 'Prochain scan', refresh: 'Actualiser', ends: 'Expire', state: '√âtat',
                all: 'Tous', active: 'Actif', network_config: 'Configuration r√©seau', network: 'R√©seau',
                netmask: 'Masque', range: 'Plage DHCP', gateway: 'Passerelle', sudo_access: 'Acc√®s sudo',
                sudo_desc: "Entrez votre mot de passe sudo pour activer les op√©rations d'√©criture.",
                sudo_password: 'Mot de passe sudo', authorize: 'Autoriser', revoke: 'R√©voquer',
                scan_settings: 'Param√®tres du scanner', scan_interval: 'Intervalle de scan',
                scan_interval_desc: 'Fr√©quence de scan du r√©seau (secondes)', ping_timeout: 'Timeout ping',
                ping_timeout_desc: 'Timeout pour les requ√™tes ping (secondes)', network_range: 'Plage r√©seau',
                network_range_desc: 'Notation CIDR (ex: 192.168.1.0/24)', max_threads: 'Threads max',
                max_threads_desc: 'Threads ping simultan√©s', save_settings: 'Enregistrer',
                appearance: 'Apparence', dark_mode: 'Mode sombre', dark_mode_desc: 'Basculer th√®me sombre/clair',
                about: '√Ä propos', add_host: 'Ajouter h√¥te', add_zone: 'Ajouter zone', add_network: 'Ajouter r√©seau',
                add_dhcp_host: 'Ajouter h√¥te statique DHCP', add_dns_zone: 'Ajouter zone DNS', cancel: 'Annuler',
                hostname_hint: 'Alphanum√©rique, tirets autoris√©s', mac_hint: 'Format: XX:XX:XX:XX:XX:XX',
                zone_name: 'Nom de zone', soa_ns: 'Serveur de noms principal', soa_email: 'Email admin',
                ttl: 'TTL par d√©faut (secondes)', range_start: 'D√©but plage DHCP', range_end: 'Fin plage DHCP',
                sudo_required: 'Mot de passe sudo requis', sudo_modal_desc: 'Cette action n√©cessite les privil√®ges sudo.',
                running: 'En cours', stopped: 'Arr√™t√©', restart: 'Red√©marrer', scanning: 'Scan en cours...',
                never: 'Jamais', network_history: 'Historique r√©seau', host_distribution: 'Distribution des h√¥tes',
                static: 'Statique', dynamic: 'Dynamique', success: 'Succ√®s', error: 'Erreur',
                host_added: 'H√¥te ajout√©', zone_created: 'Zone cr√©√©e', settings_saved: 'Param√®tres enregistr√©s',
                sudo_authorized: 'Acc√®s sudo accord√©', sudo_revoked: 'Acc√®s sudo r√©voqu√©', actions: 'Actions',
                edit: 'Modifier', delete: 'Supprimer', save: 'Enregistrer', discard: 'Annuler', apply: 'Appliquer',
                activate_changes: 'Activer les changements', activate_desc: 'Les changements suivants seront √©crits sur le disque.',
                edit_dhcp_host: "Modifier l'h√¥te DHCP", edit_dns_record: "Modifier l'enregistrement DNS",
                changes_applied: 'Changements appliqu√©s', changes_discarded: 'Changements annul√©s',
                change_staged: "Changement pr√©par√© pour l'activation", confirm_delete: '√ätes-vous s√ªr de vouloir supprimer ceci?'
            },
            es: {
                slogan: 'Administra tu red interna f√°cilmente',
                dashboard: 'Panel', dhcp: 'DHCP', dns: 'DNS', scanner: 'Esc√°ner IP',
                leases: 'Concesiones', networks: 'Redes', settings: 'Configuraci√≥n', logout: 'Cerrar sesi√≥n',
                static_hosts: 'Hosts est√°ticos', dynamic_hosts: 'Hosts din√°micos', dns_zones: 'Zonas DNS',
                online_hosts: 'Hosts en l√≠nea', active_leases: 'Concesiones activas', services: 'Servicios',
                recent_hosts: 'Hosts est√°ticos recientes', hostname: 'Nombre de host', mac_address: 'Direcci√≥n MAC',
                ip_address: 'Direcci√≥n IP', status: 'Estado', type: 'Tipo', dhcp_static: 'Mapeos est√°ticos DHCP',
                dhcp_options: 'Opciones globales DHCP', dhcp_leases: 'Concesiones DHCP', search: 'Buscar...',
                name: 'Nombre', value: 'Valor', ip_scanner: 'Esc√°ner IP', start_scan: 'Iniciar escaneo',
                online: 'En l√≠nea', offline: 'Fuera de l√≠nea', total: 'Total', last_scan: '√öltimo escaneo',
                next_scan: 'Pr√≥ximo escaneo', refresh: 'Actualizar', ends: 'Expira', state: 'Estado',
                all: 'Todos', active: 'Activo', network_config: 'Configuraci√≥n de red', network: 'Red',
                netmask: 'M√°scara', range: 'Rango DHCP', gateway: 'Puerta de enlace', sudo_access: 'Acceso sudo',
                sudo_desc: 'Ingresa tu contrase√±a sudo para habilitar operaciones de escritura.',
                sudo_password: 'Contrase√±a sudo', authorize: 'Autorizar', revoke: 'Revocar',
                scan_settings: 'Configuraci√≥n del esc√°ner', scan_interval: 'Intervalo de escaneo',
                scan_interval_desc: 'Frecuencia de escaneo de red (segundos)', ping_timeout: 'Timeout de ping',
                ping_timeout_desc: 'Timeout para solicitudes ping (segundos)', network_range: 'Rango de red',
                network_range_desc: 'Notaci√≥n CIDR (ej: 192.168.1.0/24)', max_threads: 'Hilos m√°x.',
                max_threads_desc: 'Hilos ping simult√°neos', save_settings: 'Guardar configuraci√≥n',
                appearance: 'Apariencia', dark_mode: 'Modo oscuro', dark_mode_desc: 'Alternar tema oscuro/claro',
                about: 'Acerca de', add_host: 'Agregar host', add_zone: 'Agregar zona', add_network: 'Agregar red',
                add_dhcp_host: 'Agregar host est√°tico DHCP', add_dns_zone: 'Agregar zona DNS', cancel: 'Cancelar',
                hostname_hint: 'Alfanum√©rico, guiones permitidos', mac_hint: 'Formato: XX:XX:XX:XX:XX:XX',
                zone_name: 'Nombre de zona', soa_ns: 'Servidor de nombres primario', soa_email: 'Email admin',
                ttl: 'TTL predeterminado (segundos)', range_start: 'Inicio rango DHCP', range_end: 'Fin rango DHCP',
                sudo_required: 'Contrase√±a sudo requerida', sudo_modal_desc: 'Esta acci√≥n requiere privilegios sudo.',
                running: 'Ejecutando', stopped: 'Detenido', restart: 'Reiniciar', scanning: 'Escaneando...',
                never: 'Nunca', network_history: 'Historial de red', host_distribution: 'Distribuci√≥n de hosts',
                static: 'Est√°tico', dynamic: 'Din√°mico', success: '√âxito', error: 'Error',
                host_added: 'Host agregado', zone_created: 'Zona creada', settings_saved: 'Configuraci√≥n guardada',
                sudo_authorized: 'Acceso sudo otorgado', sudo_revoked: 'Acceso sudo revocado', actions: 'Acciones',
                edit: 'Editar', delete: 'Eliminar', save: 'Guardar', discard: 'Descartar', apply: 'Aplicar',
                activate_changes: 'Activar cambios', activate_desc: 'Los siguientes cambios se escribir√°n en disco.',
                edit_dhcp_host: 'Editar host DHCP', edit_dns_record: 'Editar registro DNS',
                changes_applied: 'Cambios aplicados', changes_discarded: 'Cambios descartados',
                change_staged: 'Cambio preparado para activaci√≥n', confirm_delete: '¬øEst√° seguro de que desea eliminar esto?'
            },
            it: {
                slogan: 'Gestisci la tua rete interna con facilit√†',
                dashboard: 'Dashboard', dhcp: 'DHCP', dns: 'DNS', scanner: 'Scanner IP',
                leases: 'Lease', networks: 'Reti', settings: 'Impostazioni', logout: 'Esci',
                static_hosts: 'Host statici', dynamic_hosts: 'Host dinamici', dns_zones: 'Zone DNS',
                online_hosts: 'Host online', active_leases: 'Lease attivi', services: 'Servizi',
                recent_hosts: 'Host statici recenti', hostname: 'Hostname', mac_address: 'Indirizzo MAC',
                ip_address: 'Indirizzo IP', status: 'Stato', type: 'Tipo', dhcp_static: 'Mappature statiche DHCP',
                dhcp_options: 'Opzioni globali DHCP', dhcp_leases: 'Lease DHCP', search: 'Cerca...',
                name: 'Nome', value: 'Valore', ip_scanner: 'Scanner IP', start_scan: 'Avvia scansione',
                online: 'Online', offline: 'Offline', total: 'Totale', last_scan: 'Ultima scansione',
                next_scan: 'Prossima scansione', refresh: 'Aggiorna', ends: 'Scade', state: 'Stato',
                all: 'Tutti', active: 'Attivo', network_config: 'Configurazione rete', network: 'Rete',
                netmask: 'Maschera', range: 'Range DHCP', gateway: 'Gateway', sudo_access: 'Accesso sudo',
                sudo_desc: 'Inserisci la password sudo per abilitare le operazioni di scrittura.',
                sudo_password: 'Password sudo', authorize: 'Autorizza', revoke: 'Revoca',
                scan_settings: 'Impostazioni scanner', scan_interval: 'Intervallo scansione',
                scan_interval_desc: 'Frequenza scansione rete (secondi)', ping_timeout: 'Timeout ping',
                ping_timeout_desc: 'Timeout richieste ping (secondi)', network_range: 'Range rete',
                network_range_desc: 'Notazione CIDR (es: 192.168.1.0/24)', max_threads: 'Thread max',
                max_threads_desc: 'Thread ping simultanei', save_settings: 'Salva impostazioni',
                appearance: 'Aspetto', dark_mode: 'Modalit√† scura', dark_mode_desc: 'Alterna tema scuro/chiaro',
                about: 'Info', add_host: 'Aggiungi host', add_zone: 'Aggiungi zona', add_network: 'Aggiungi rete',
                add_dhcp_host: 'Aggiungi host statico DHCP', add_dns_zone: 'Aggiungi zona DNS', cancel: 'Annulla',
                hostname_hint: 'Alfanumerico, trattini permessi', mac_hint: 'Formato: XX:XX:XX:XX:XX:XX',
                zone_name: 'Nome zona', soa_ns: 'Nameserver primario', soa_email: 'Email admin',
                ttl: 'TTL predefinito (secondi)', range_start: 'Inizio range DHCP', range_end: 'Fine range DHCP',
                sudo_required: 'Password sudo richiesta', sudo_modal_desc: 'Questa azione richiede privilegi sudo.',
                running: 'In esecuzione', stopped: 'Fermato', restart: 'Riavvia', scanning: 'Scansione...',
                never: 'Mai', network_history: 'Cronologia rete', host_distribution: 'Distribuzione host',
                static: 'Statico', dynamic: 'Dinamico', success: 'Successo', error: 'Errore',
                host_added: 'Host aggiunto', zone_created: 'Zona creata', settings_saved: 'Impostazioni salvate',
                sudo_authorized: 'Accesso sudo concesso', sudo_revoked: 'Accesso sudo revocato', actions: 'Azioni',
                edit: 'Modifica', delete: 'Elimina', save: 'Salva', discard: 'Scarta', apply: 'Applica',
                activate_changes: 'Attiva modifiche', activate_desc: 'Le seguenti modifiche verranno scritte su disco.',
                edit_dhcp_host: 'Modifica host DHCP', edit_dns_record: 'Modifica record DNS',
                changes_applied: 'Modifiche applicate', changes_discarded: 'Modifiche scartate',
                change_staged: 'Modifica preparata per attivazione', confirm_delete: 'Sei sicuro di voler eliminare questo?'
            },
            nl: {
                slogan: 'Beheer uw interne netwerk met gemak',
                dashboard: 'Dashboard', dhcp: 'DHCP', dns: 'DNS', scanner: 'IP Scanner',
                leases: 'Leases', networks: 'Netwerken', settings: 'Instellingen', logout: 'Uitloggen',
                static_hosts: 'Statische hosts', dynamic_hosts: 'Dynamische hosts', dns_zones: 'DNS Zones',
                online_hosts: 'Online hosts', active_leases: 'Actieve leases', services: 'Diensten',
                recent_hosts: 'Recente statische hosts', hostname: 'Hostnaam', mac_address: 'MAC-adres',
                ip_address: 'IP-adres', status: 'Status', type: 'Type', dhcp_static: 'DHCP Statische toewijzingen',
                dhcp_options: 'DHCP Globale opties', dhcp_leases: 'DHCP Leases', search: 'Zoeken...',
                name: 'Naam', value: 'Waarde', ip_scanner: 'IP Scanner', start_scan: 'Start scan',
                online: 'Online', offline: 'Offline', total: 'Totaal', last_scan: 'Laatste scan',
                next_scan: 'Volgende scan', refresh: 'Vernieuwen', ends: 'Verloopt', state: 'Status',
                all: 'Alle', active: 'Actief', network_config: 'Netwerkconfiguratie', network: 'Netwerk',
                netmask: 'Netmasker', range: 'DHCP Bereik', gateway: 'Gateway', sudo_access: 'Sudo toegang',
                sudo_desc: 'Voer uw sudo wachtwoord in om schrijfbewerkingen in te schakelen.',
                sudo_password: 'Sudo wachtwoord', authorize: 'Autoriseren', revoke: 'Intrekken',
                scan_settings: 'Scanner instellingen', scan_interval: 'Scan interval',
                scan_interval_desc: 'Hoe vaak het netwerk wordt gescand (seconden)', ping_timeout: 'Ping timeout',
                ping_timeout_desc: 'Timeout voor ping verzoeken (seconden)', network_range: 'Netwerkbereik',
                network_range_desc: 'CIDR notatie (bijv. 192.168.1.0/24)', max_threads: 'Max threads',
                max_threads_desc: 'Gelijktijdige ping threads', save_settings: 'Instellingen opslaan',
                appearance: 'Uiterlijk', dark_mode: 'Donkere modus', dark_mode_desc: 'Schakel donker/licht thema',
                about: 'Over', add_host: 'Host toevoegen', add_zone: 'Zone toevoegen', add_network: 'Netwerk toevoegen',
                add_dhcp_host: 'DHCP Statische host toevoegen', add_dns_zone: 'DNS Zone toevoegen', cancel: 'Annuleren',
                hostname_hint: 'Alfanumeriek, koppeltekens toegestaan', mac_hint: 'Formaat: XX:XX:XX:XX:XX:XX',
                zone_name: 'Zone naam', soa_ns: 'Primaire nameserver', soa_email: 'Admin email',
                ttl: 'Standaard TTL (seconden)', range_start: 'DHCP Bereik start', range_end: 'DHCP Bereik einde',
                sudo_required: 'Sudo wachtwoord vereist', sudo_modal_desc: 'Deze actie vereist sudo rechten.',
                running: 'Actief', stopped: 'Gestopt', restart: 'Herstarten', scanning: 'Scannen...',
                never: 'Nooit', network_history: 'Netwerk geschiedenis', host_distribution: 'Host verdeling',
                static: 'Statisch', dynamic: 'Dynamisch', success: 'Succes', error: 'Fout',
                host_added: 'Host toegevoegd', zone_created: 'Zone aangemaakt', settings_saved: 'Instellingen opgeslagen',
                sudo_authorized: 'Sudo toegang verleend', sudo_revoked: 'Sudo toegang ingetrokken', actions: 'Acties',
                edit: 'Bewerken', delete: 'Verwijderen', save: 'Opslaan', discard: 'Verwerpen', apply: 'Toepassen',
                activate_changes: 'Wijzigingen activeren', activate_desc: 'De volgende wijzigingen worden naar schijf geschreven.',
                edit_dhcp_host: 'DHCP host bewerken', edit_dns_record: 'DNS record bewerken',
                changes_applied: 'Wijzigingen toegepast', changes_discarded: 'Wijzigingen verworpen',
                change_staged: 'Wijziging voorbereid voor activering', confirm_delete: 'Weet u zeker dat u dit wilt verwijderen?'
            },
            pt: {
                slogan: 'Gerencie sua rede interna com facilidade',
                dashboard: 'Painel', dhcp: 'DHCP', dns: 'DNS', scanner: 'Scanner IP',
                leases: 'Concess√µes', networks: 'Redes', settings: 'Configura√ß√µes', logout: 'Sair',
                static_hosts: 'Hosts est√°ticos', dynamic_hosts: 'Hosts din√¢micos', dns_zones: 'Zonas DNS',
                online_hosts: 'Hosts online', active_leases: 'Concess√µes ativas', services: 'Servi√ßos',
                recent_hosts: 'Hosts est√°ticos recentes', hostname: 'Nome do host', mac_address: 'Endere√ßo MAC',
                ip_address: 'Endere√ßo IP', status: 'Status', type: 'Tipo', dhcp_static: 'Mapeamentos est√°ticos DHCP',
                dhcp_options: 'Op√ß√µes globais DHCP', dhcp_leases: 'Concess√µes DHCP', search: 'Pesquisar...',
                name: 'Nome', value: 'Valor', ip_scanner: 'Scanner IP', start_scan: 'Iniciar varredura',
                online: 'Online', offline: 'Offline', total: 'Total', last_scan: '√öltima varredura',
                next_scan: 'Pr√≥xima varredura', refresh: 'Atualizar', ends: 'Expira', state: 'Estado',
                all: 'Todos', active: 'Ativo', network_config: 'Configura√ß√£o de rede', network: 'Rede',
                netmask: 'M√°scara', range: 'Faixa DHCP', gateway: 'Gateway', sudo_access: 'Acesso sudo',
                sudo_desc: 'Digite sua senha sudo para habilitar opera√ß√µes de escrita.',
                sudo_password: 'Senha sudo', authorize: 'Autorizar', revoke: 'Revogar',
                scan_settings: 'Configura√ß√µes do scanner', scan_interval: 'Intervalo de varredura',
                scan_interval_desc: 'Frequ√™ncia de varredura da rede (segundos)', ping_timeout: 'Timeout de ping',
                ping_timeout_desc: 'Timeout para solicita√ß√µes ping (segundos)', network_range: 'Faixa de rede',
                network_range_desc: 'Nota√ß√£o CIDR (ex: 192.168.1.0/24)', max_threads: 'Threads m√°x.',
                max_threads_desc: 'Threads ping simult√¢neos', save_settings: 'Salvar configura√ß√µes',
                appearance: 'Apar√™ncia', dark_mode: 'Modo escuro', dark_mode_desc: 'Alternar tema escuro/claro',
                about: 'Sobre', add_host: 'Adicionar host', add_zone: 'Adicionar zona', add_network: 'Adicionar rede',
                add_dhcp_host: 'Adicionar host est√°tico DHCP', add_dns_zone: 'Adicionar zona DNS', cancel: 'Cancelar',
                hostname_hint: 'Alfanum√©rico, h√≠fens permitidos', mac_hint: 'Formato: XX:XX:XX:XX:XX:XX',
                zone_name: 'Nome da zona', soa_ns: 'Servidor de nomes prim√°rio', soa_email: 'Email admin',
                ttl: 'TTL padr√£o (segundos)', range_start: 'In√≠cio faixa DHCP', range_end: 'Fim faixa DHCP',
                sudo_required: 'Senha sudo necess√°ria', sudo_modal_desc: 'Esta a√ß√£o requer privil√©gios sudo.',
                running: 'Executando', stopped: 'Parado', restart: 'Reiniciar', scanning: 'Varrendo...',
                never: 'Nunca', network_history: 'Hist√≥rico de rede', host_distribution: 'Distribui√ß√£o de hosts',
                static: 'Est√°tico', dynamic: 'Din√¢mico', success: 'Sucesso', error: 'Erro',
                host_added: 'Host adicionado', zone_created: 'Zona criada', settings_saved: 'Configura√ß√µes salvas',
                sudo_authorized: 'Acesso sudo concedido', sudo_revoked: 'Acesso sudo revogado', actions: 'A√ß√µes',
                edit: 'Editar', delete: 'Excluir', save: 'Salvar', discard: 'Descartar', apply: 'Aplicar',
                activate_changes: 'Ativar altera√ß√µes', activate_desc: 'As seguintes altera√ß√µes ser√£o gravadas no disco.',
                edit_dhcp_host: 'Editar host DHCP', edit_dns_record: 'Editar registro DNS',
                changes_applied: 'Altera√ß√µes aplicadas', changes_discarded: 'Altera√ß√µes descartadas',
                change_staged: 'Altera√ß√£o preparada para ativa√ß√£o', confirm_delete: 'Tem certeza de que deseja excluir isto?'
            },
            no: {
                slogan: 'Administrer ditt interne nettverk enkelt',
                dashboard: 'Oversikt', dhcp: 'DHCP', dns: 'DNS', scanner: 'IP-skanner',
                leases: 'Leie', networks: 'Nettverk', settings: 'Innstillinger', logout: 'Logg ut',
                static_hosts: 'Statiske verter', dynamic_hosts: 'Dynamiske verter', dns_zones: 'DNS-soner',
                online_hosts: 'Online verter', active_leases: 'Aktive leie', services: 'Tjenester',
                recent_hosts: 'Nylige statiske verter', hostname: 'Vertsnavn', mac_address: 'MAC-adresse',
                ip_address: 'IP-adresse', status: 'Status', type: 'Type', dhcp_static: 'DHCP statiske tilordninger',
                dhcp_options: 'DHCP globale alternativer', dhcp_leases: 'DHCP-leie', search: 'S√∏k...',
                name: 'Navn', value: 'Verdi', ip_scanner: 'IP-skanner', start_scan: 'Start skanning',
                online: 'Online', offline: 'Offline', total: 'Totalt', last_scan: 'Siste skanning',
                next_scan: 'Neste skanning', refresh: 'Oppdater', ends: 'Utl√∏per', state: 'Tilstand',
                all: 'Alle', active: 'Aktiv', network_config: 'Nettverkskonfigurasjon', network: 'Nettverk',
                netmask: 'Nettmaske', range: 'DHCP-omr√•de', gateway: 'Gateway', sudo_access: 'Sudo-tilgang',
                sudo_desc: 'Skriv inn sudo-passordet ditt for √• aktivere skriveoperasjoner.',
                sudo_password: 'Sudo-passord', authorize: 'Autoriser', revoke: 'Tilbakekall',
                scan_settings: 'Skannerinnstillinger', scan_interval: 'Skanningsintervall',
                scan_interval_desc: 'Hvor ofte nettverket skannes (sekunder)', ping_timeout: 'Ping-tidsavbrudd',
                ping_timeout_desc: 'Tidsavbrudd for ping-foresp√∏rsler (sekunder)', network_range: 'Nettverksomr√•de',
                network_range_desc: 'CIDR-notasjon (f.eks. 192.168.1.0/24)', max_threads: 'Maks tr√•der',
                max_threads_desc: 'Samtidige ping-tr√•der', save_settings: 'Lagre innstillinger',
                appearance: 'Utseende', dark_mode: 'M√∏rk modus', dark_mode_desc: 'Bytt mellom m√∏rkt/lyst tema',
                about: 'Om', add_host: 'Legg til vert', add_zone: 'Legg til sone', add_network: 'Legg til nettverk',
                add_dhcp_host: 'Legg til DHCP statisk vert', add_dns_zone: 'Legg til DNS-sone', cancel: 'Avbryt',
                hostname_hint: 'Alfanumerisk, bindestreker tillatt', mac_hint: 'Format: XX:XX:XX:XX:XX:XX',
                zone_name: 'Sonenavn', soa_ns: 'Prim√¶r navneserver', soa_email: 'Admin e-post',
                ttl: 'Standard TTL (sekunder)', range_start: 'DHCP-omr√•de start', range_end: 'DHCP-omr√•de slutt',
                sudo_required: 'Sudo-passord p√•krevd', sudo_modal_desc: 'Denne handlingen krever sudo-rettigheter.',
                running: 'Kj√∏rer', stopped: 'Stoppet', restart: 'Start p√• nytt', scanning: 'Skanner...',
                never: 'Aldri', network_history: 'Nettverkshistorikk', host_distribution: 'Vertfordeling',
                static: 'Statisk', dynamic: 'Dynamisk', success: 'Suksess', error: 'Feil',
                host_added: 'Vert lagt til', zone_created: 'Sone opprettet', settings_saved: 'Innstillinger lagret',
                sudo_authorized: 'Sudo-tilgang gitt', sudo_revoked: 'Sudo-tilgang tilbakekalt', actions: 'Handlinger',
                edit: 'Rediger', delete: 'Slett', save: 'Lagre', discard: 'Forkast', apply: 'Bruk',
                activate_changes: 'Aktiver endringer', activate_desc: 'F√∏lgende endringer vil bli skrevet til disk.',
                edit_dhcp_host: 'Rediger DHCP-vert', edit_dns_record: 'Rediger DNS-oppf√∏ring',
                changes_applied: 'Endringer brukt', changes_discarded: 'Endringer forkastet',
                change_staged: 'Endring forberedt for aktivering', confirm_delete: 'Er du sikker p√• at du vil slette dette?'
            },
            da: {
                slogan: 'Administrer dit interne netv√¶rk nemt',
                dashboard: 'Oversigt', dhcp: 'DHCP', dns: 'DNS', scanner: 'IP-scanner',
                leases: 'Leases', networks: 'Netv√¶rk', settings: 'Indstillinger', logout: 'Log ud',
                static_hosts: 'Statiske v√¶rter', dynamic_hosts: 'Dynamiske v√¶rter', dns_zones: 'DNS-zoner',
                online_hosts: 'Online v√¶rter', active_leases: 'Aktive leases', services: 'Tjenester',
                recent_hosts: 'Seneste statiske v√¶rter', hostname: 'V√¶rtsnavn', mac_address: 'MAC-adresse',
                ip_address: 'IP-adresse', status: 'Status', type: 'Type', dhcp_static: 'DHCP statiske tilknytninger',
                dhcp_options: 'DHCP globale indstillinger', dhcp_leases: 'DHCP leases', search: 'S√∏g...',
                name: 'Navn', value: 'V√¶rdi', ip_scanner: 'IP-scanner', start_scan: 'Start scanning',
                online: 'Online', offline: 'Offline', total: 'Total', last_scan: 'Sidste scanning',
                next_scan: 'N√¶ste scanning', refresh: 'Opdater', ends: 'Udl√∏ber', state: 'Tilstand',
                all: 'Alle', active: 'Aktiv', network_config: 'Netv√¶rkskonfiguration', network: 'Netv√¶rk',
                netmask: 'Netmaske', range: 'DHCP-omr√•de', gateway: 'Gateway', sudo_access: 'Sudo-adgang',
                sudo_desc: 'Indtast din sudo-adgangskode for at aktivere skriveoperationer.',
                sudo_password: 'Sudo-adgangskode', authorize: 'Godkend', revoke: 'Tilbagekald',
                scan_settings: 'Scanner-indstillinger', scan_interval: 'Scanningsinterval',
                scan_interval_desc: 'Hvor ofte netv√¶rket scannes (sekunder)', ping_timeout: 'Ping timeout',
                ping_timeout_desc: 'Timeout for ping-anmodninger (sekunder)', network_range: 'Netv√¶rksomr√•de',
                network_range_desc: 'CIDR-notation (f.eks. 192.168.1.0/24)', max_threads: 'Maks tr√•de',
                max_threads_desc: 'Samtidige ping-tr√•de', save_settings: 'Gem indstillinger',
                appearance: 'Udseende', dark_mode: 'M√∏rk tilstand', dark_mode_desc: 'Skift mellem m√∏rkt/lyst tema',
                about: 'Om', add_host: 'Tilf√∏j v√¶rt', add_zone: 'Tilf√∏j zone', add_network: 'Tilf√∏j netv√¶rk',
                add_dhcp_host: 'Tilf√∏j DHCP statisk v√¶rt', add_dns_zone: 'Tilf√∏j DNS-zone', cancel: 'Annuller',
                hostname_hint: 'Alfanumerisk, bindestreger tilladt', mac_hint: 'Format: XX:XX:XX:XX:XX:XX',
                zone_name: 'Zonenavn', soa_ns: 'Prim√¶r navneserver', soa_email: 'Admin e-mail',
                ttl: 'Standard TTL (sekunder)', range_start: 'DHCP-omr√•de start', range_end: 'DHCP-omr√•de slut',
                sudo_required: 'Sudo-adgangskode p√•kr√¶vet', sudo_modal_desc: 'Denne handling kr√¶ver sudo-rettigheder.',
                running: 'K√∏rer', stopped: 'Stoppet', restart: 'Genstart', scanning: 'Scanner...',
                never: 'Aldrig', network_history: 'Netv√¶rkshistorik', host_distribution: 'V√¶rtfordeling',
                static: 'Statisk', dynamic: 'Dynamisk', success: 'Succes', error: 'Fejl',
                host_added: 'V√¶rt tilf√∏jet', zone_created: 'Zone oprettet', settings_saved: 'Indstillinger gemt',
                sudo_authorized: 'Sudo-adgang givet', sudo_revoked: 'Sudo-adgang tilbagekaldt', actions: 'Handlinger',
                edit: 'Rediger', delete: 'Slet', save: 'Gem', discard: 'Kass√©r', apply: 'Anvend',
                activate_changes: 'Aktiv√©r √¶ndringer', activate_desc: 'F√∏lgende √¶ndringer vil blive skrevet til disk.',
                edit_dhcp_host: 'Rediger DHCP-v√¶rt', edit_dns_record: 'Rediger DNS-post',
                changes_applied: '√Ündringer anvendt', changes_discarded: '√Ündringer kasseret',
                change_staged: '√Ündring forberedt til aktivering', confirm_delete: 'Er du sikker p√•, at du vil slette dette?'
            }
        };
        
        // ========================================================================
        // State
        // ========================================================================
        let currentLang = localStorage.getItem('lang') || 'en';
        let darkMode = localStorage.getItem('darkMode') !== 'false';
        let dhcpData = null;
        let dnsData = null;
        let scanData = null;
        let statsData = null;
        let currentZone = 0;
        let hasSudo = false;
        let historyChart = null;
        let distributionChart = null;
        let pendingSudoCallback = null;
        
        // ========================================================================
        // Utilities
        // ========================================================================
        const t = key => translations[currentLang][key] || key;
        
        function applyTranslations() {
            const trans = translations[currentLang];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.dataset.i18n;
                if (trans[key]) el.textContent = trans[key];
            });
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.dataset.i18nPlaceholder;
                if (trans[key]) el.placeholder = trans[key];
            });
        }
        
        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `${type === 'success' ? '‚úì' : '‚úó'} ${message}`;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 4000);
        }
        
        function showModal(id) {
            document.getElementById(id).classList.add('active');
        }
        
        function hideModal(id) {
            document.getElementById(id).classList.remove('active');
        }
        
        function formatTime(isoString) {
            if (!isoString) return t('never');
            const date = new Date(isoString);
            return date.toLocaleTimeString(currentLang === 'sv' ? 'sv-SE' : 'en-GB', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
        }
        
        function formatDateTime(isoString) {
            if (!isoString) return t('never');
            const date = new Date(isoString);
            return date.toLocaleString(currentLang === 'sv' ? 'sv-SE' : 'en-GB', { 
                month: 'short',
                day: 'numeric',
                hour: '2-digit', 
                minute: '2-digit' 
            });
        }
        
        // ========================================================================
        // Theme
        // ========================================================================
        function applyTheme() {
            if (darkMode) {
                document.documentElement.classList.remove('light');
                document.getElementById('theme-toggle').textContent = 'üåô';
            } else {
                document.documentElement.classList.add('light');
                document.getElementById('theme-toggle').textContent = '‚òÄÔ∏è';
            }
            document.getElementById('theme-toggle-setting')?.classList.toggle('active', darkMode);
        }
        
        document.getElementById('theme-toggle').addEventListener('click', () => {
            darkMode = !darkMode;
            localStorage.setItem('darkMode', darkMode);
            applyTheme();
        });
        
        document.getElementById('theme-toggle-setting')?.addEventListener('click', function() {
            darkMode = !darkMode;
            localStorage.setItem('darkMode', darkMode);
            applyTheme();
        });
        
        // ========================================================================
        // Language Dropdown
        // ========================================================================
        const langDropdownBtn = document.getElementById('lang-dropdown-btn');
        const langDropdownMenu = document.getElementById('lang-dropdown-menu');
        
        langDropdownBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            langDropdownMenu.style.display = langDropdownMenu.style.display === 'none' ? 'block' : 'none';
        });
        
        document.addEventListener('click', () => {
            langDropdownMenu.style.display = 'none';
        });
        
        document.querySelectorAll('.lang-option').forEach(option => {
            option.addEventListener('mouseenter', () => {
                option.style.background = 'var(--primary)';
            });
            option.addEventListener('mouseleave', () => {
                option.style.background = 'transparent';
            });
            option.addEventListener('click', async () => {
                const lang = option.dataset.lang;
                const flag = option.dataset.flag;
                const name = option.dataset.name;
                
                document.getElementById('current-lang-flag').textContent = flag;
                document.getElementById('current-lang-name').textContent = name;
                
                currentLang = lang;
                localStorage.setItem('lang', lang);
                langDropdownMenu.style.display = 'none';
                
                await fetch('/api/lang', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ lang })
                });
                
                applyTranslations();
                updateCharts();
            });
        });
        
        // Set initial language in dropdown
        function updateLangDropdown() {
            const option = document.querySelector(`.lang-option[data-lang="${currentLang}"]`);
            if (option) {
                document.getElementById('current-lang-flag').textContent = option.dataset.flag;
                document.getElementById('current-lang-name').textContent = option.dataset.name;
            }
        }
        
        // ========================================================================
        // Navigation
        // ========================================================================
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tab.dataset.view + '-view').classList.add('active');
            });
        });
        
        // ========================================================================
        // API Functions
        // ========================================================================
        async function loadUser() {
            const res = await fetch('/api/user');
            const data = await res.json();
            document.getElementById('username').textContent = data.username;
            hasSudo = data.has_sudo;
            updateSudoUI();
        }
        
        function updateSudoUI() {
            const badge = document.getElementById('sudo-badge');
            const clearBtn = document.getElementById('clear-sudo-btn');
            
            if (hasSudo) {
                badge.style.display = 'inline';
                clearBtn.style.display = 'inline-flex';
            } else {
                badge.style.display = 'none';
                clearBtn.style.display = 'none';
            }
        }
        
        async function loadStats() {
            const res = await fetch('/api/stats');
            statsData = await res.json();
            
            document.getElementById('stat-static').textContent = statsData.static_hosts;
            document.getElementById('stat-dynamic').textContent = statsData.dynamic_hosts;
            document.getElementById('stat-online').textContent = statsData.online_hosts;
            document.getElementById('stat-zones').textContent = statsData.dns_zones;
            document.getElementById('stat-leases').textContent = statsData.active_leases;
            
            // Update header scan info
            document.getElementById('header-last-scan').textContent = formatTime(statsData.last_scan);
            if (statsData.last_scan && statsData.scan_interval) {
                const nextScan = new Date(new Date(statsData.last_scan).getTime() + statsData.scan_interval * 1000);
                document.getElementById('header-next-scan').textContent = formatTime(nextScan.toISOString());
            }
        }
        
        async function loadDHCP() {
            const res = await fetch('/api/dhcp');
            dhcpData = await res.json();
            
            const tbody = document.querySelector('#dhcp-table tbody');
            tbody.innerHTML = dhcpData.hosts?.map(h => `
                <tr data-online="${h.online}" data-type="static" data-hostname="${h.name}">
                    <td><span class="status-dot ${h.online === true ? 'online' : h.online === false ? 'offline' : 'unknown'}"></span></td>
                    <td><strong>${h.name}</strong></td>
                    <td><code>${h.mac}</code></td>
                    <td><code>${h.address || '-'}</code></td>
                    <td><span class="badge static">${t('static')}</span></td>
                    <td>
                        <button class="btn btn-sm btn-secondary" onclick="editDhcpHost('${h.name}', '${h.mac}', '${h.address || ''}')" title="${t('edit')}">‚úèÔ∏è</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteDhcpHost('${h.name}')" title="${t('delete')}">üóëÔ∏è</button>
                    </td>
                </tr>
            `).join('') || '<tr><td colspan="6">No data</td></tr>';
            
            // Recent hosts table
            const recentTbody = document.querySelector('#recent-hosts-table tbody');
            recentTbody.innerHTML = dhcpData.hosts?.slice(0, 10).map(h => `
                <tr>
                    <td><span class="status-dot ${h.online === true ? 'online' : h.online === false ? 'offline' : 'unknown'}"></span></td>
                    <td><strong>${h.name}</strong></td>
                    <td><code>${h.mac}</code></td>
                    <td><code>${h.address || '-'}</code></td>
                </tr>
            `).join('') || '';
            
            // Options
            const optionsDiv = document.getElementById('dhcp-options');
            const opts = Object.entries(dhcpData.options || {});
            optionsDiv.innerHTML = opts.length ? opts.map(([k, v]) => `
                <div class="setting-row">
                    <div class="setting-label">${k}</div>
                    <code>${v}</code>
                </div>
            `).join('') : '<p style="color:var(--muted)">No global options configured</p>';
        }
        
        async function loadDNS() {
            const res = await fetch('/api/dns');
            dnsData = await res.json();
            
            // Zone tabs
            const zoneTabs = document.getElementById('zone-tabs');
            zoneTabs.innerHTML = dnsData.zones?.map((z, i) => `
                <button class="zone-tab ${i === currentZone ? 'active' : ''}" data-zone="${i}">
                    ${z.name} <small style="opacity:0.6">(${z.record_count || 0})</small>
                </button>
            `).join('') || '<span style="color:var(--muted)">No zones found</span>';
            
            zoneTabs.querySelectorAll('.zone-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.zone-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    currentZone = parseInt(tab.dataset.zone);
                    renderDNSRecords();
                });
            });
            
            renderDNSRecords();
        }
        
        function renderDNSRecords() {
            if (!dnsData?.zones?.[currentZone]) return;
            
            const zone = dnsData.zones[currentZone];
            const tbody = document.querySelector('#dns-table tbody');
            
            tbody.innerHTML = zone.records?.map(r => `
                <tr>
                    <td>${r.type === 'A' ? `<span class="status-dot ${r.online === true ? 'online' : r.online === false ? 'offline' : 'unknown'}"></span>` : ''}</td>
                    <td><code>${r.name}</code></td>
                    <td><span class="record-type ${r.type}">${r.type}</span></td>
                    <td><code>${r.value}</code>${r.priority ? ` <small>(pri: ${r.priority})</small>` : ''}</td>
                    <td>
                        <button class="btn btn-sm btn-secondary" onclick="editDnsRecord('${zone.name}', '${r.name}', '${r.type}', '${r.value}')" title="${t('edit')}">‚úèÔ∏è</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteDnsRecord('${zone.name}', '${r.name}', '${r.type}')" title="${t('delete')}">üóëÔ∏è</button>
                    </td>
                </tr>
            `).join('') || '<tr><td colspan="5">No records</td></tr>';
        }
        
        async function loadScan() {
            const res = await fetch('/api/scan');
            scanData = await res.json();
            
            const online = scanData.online_count || 0;
            const total = scanData.total_count || 0;
            
            document.getElementById('scan-online').textContent = online;
            document.getElementById('scan-offline').textContent = total - online;
            document.getElementById('scan-total').textContent = total;
            document.getElementById('scan-time').textContent = formatDateTime(scanData.last_scan);
            document.getElementById('scan-status').textContent = scanData.in_progress ? t('scanning') : '';
            document.getElementById('start-scan-btn').disabled = scanData.in_progress;
            
            // IP Grid - show only responding hosts for clarity
            const grid = document.getElementById('ip-grid');
            const sortedIps = Object.entries(scanData.results || {})
                .filter(([ip, data]) => data.online)
                .sort(([a], [b]) => {
                    const aParts = a.split('.').map(Number);
                    const bParts = b.split('.').map(Number);
                    for (let i = 0; i < 4; i++) {
                        if (aParts[i] !== bParts[i]) return aParts[i] - bParts[i];
                    }
                    return 0;
                });
            
            grid.innerHTML = sortedIps.map(([ip, data]) => {
                const host = dhcpData?.hosts?.find(h => h.address === ip);
                return `
                    <div class="ip-cell online" title="${ip}${host ? ' - ' + host.name : ''}">
                        <div class="ip">${ip.split('.').slice(-2).join('.')}</div>
                        ${host ? `<div class="hostname">${host.name}</div>` : ''}
                    </div>
                `;
            }).join('') || '<div style="padding:2rem;color:var(--muted);text-align:center;">No hosts online or scan not yet run</div>';
        }
        
        async function loadLeases() {
            const res = await fetch('/api/leases');
            const data = await res.json();
            
            const tbody = document.querySelector('#leases-table tbody');
            tbody.innerHTML = data.leases?.map(l => `
                <tr data-state="${l.state}" data-online="${l.online}">
                    <td><span class="status-dot ${l.online ? 'online' : 'offline'}"></span></td>
                    <td><code>${l.ip}</code></td>
                    <td><code>${l.mac || '-'}</code></td>
                    <td>${l.hostname || '-'}</td>
                    <td>${l.ends || '-'}</td>
                    <td><span class="badge ${l.state === 'active' ? 'online' : 'offline'}">${l.state || '-'}</span></td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="showPromoteModal('${l.ip}', '${l.mac || ''}', '${l.hostname || ''}')" title="${t('make_static') || 'Make Static'}">üìå</button>
                    </td>
                </tr>
            `).join('') || '<tr><td colspan="7">No leases found</td></tr>';
        }
        
        async function loadNetworks() {
            const res = await fetch('/api/networks');
            const data = await res.json();
            
            const tbody = document.querySelector('#networks-table tbody');
            tbody.innerHTML = data.networks?.map(n => {
                const gateway = n.options?.routers || '';
                const dns = n.options?.['domain-name-servers'] || '';
                return `
                <tr>
                    <td><code>${n.network}</code></td>
                    <td><code>${n.netmask}</code></td>
                    <td>${n.range_start && n.range_end ? `${n.range_start} - ${n.range_end}` : '-'}</td>
                    <td>${gateway || '-'}</td>
                    <td>${dns || '-'}</td>
                    <td>
                        <button class="btn btn-sm btn-secondary" onclick="editNetwork('${n.network}', '${n.netmask}', '${n.range_start || ''}', '${n.range_end || ''}', '${gateway}', '${dns}')" title="${t('edit')}">‚úèÔ∏è</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteNetwork('${n.network}')" title="${t('delete')}">üóëÔ∏è</button>
                    </td>
                </tr>
            `}).join('') || '<tr><td colspan="6">No networks configured</td></tr>';
        }
        
        async function loadServices() {
            const res = await fetch('/api/services');
            const services = await res.json();
            
            const div = document.getElementById('services-list');
            div.innerHTML = Object.entries(services).map(([name, status]) => `
                <div class="setting-row">
                    <div>
                        <div class="setting-label">${name}</div>
                        <span class="badge ${status}">${t(status) || status}</span>
                    </div>
                    <button class="btn btn-sm btn-secondary" onclick="restartService('${name}')">${t('restart')}</button>
                </div>
            `).join('');
        }
        
        async function loadConfig() {
            const res = await fetch('/api/config');
            const config = await res.json();
            
            document.getElementById('setting-scan-interval').value = config.scan_interval;
            document.getElementById('setting-ping-timeout').value = config.ping_timeout;
            document.getElementById('setting-max-threads').value = config.max_threads;
            document.getElementById('scanner-network').textContent = config.network;
            
            // Populate network dropdown with allowed networks
            const networkSelect = document.getElementById('setting-network');
            networkSelect.innerHTML = '';
            if (config.allowed_networks && config.allowed_networks.length > 0) {
                config.allowed_networks.forEach(net => {
                    const option = document.createElement('option');
                    option.value = net;
                    option.textContent = net;
                    if (net === config.network) option.selected = true;
                    networkSelect.appendChild(option);
                });
            } else {
                const option = document.createElement('option');
                option.value = '';
                option.textContent = '‚ö†Ô∏è No networks configured';
                option.disabled = true;
                option.selected = true;
                networkSelect.appendChild(option);
            }
        }
        
        async function loadHistory() {
            // Try lease history first for more accurate data
            try {
                const leaseRes = await fetch('/api/lease/history');
                const leaseData = await leaseRes.json();
                if (leaseData.history?.length > 0) {
                    updateChartsWithLeaseData(leaseData.history);
                    return;
                }
            } catch (e) { /* fallback to scan history */ }
            
            const res = await fetch('/api/scan/history');
            const data = await res.json();
            updateCharts(data.history);
        }
        
        function updateChartsWithLeaseData(history) {
            const ctx1 = document.getElementById('history-chart')?.getContext('2d');
            if (!ctx1 || !history.length) return;
            
            const labels = history.map(h => formatTime(h.timestamp));
            const requestsData = history.map(h => h.requests);
            const hostsData = history.map(h => h.unique_hosts);
            
            if (historyChart) historyChart.destroy();
            historyChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels,
                    datasets: [
                        {
                            label: 'DHCP Requests',
                            data: requestsData,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            fill: true,
                            tension: 0.3
                        },
                        {
                            label: 'Unique Hosts',
                            data: hostsData,
                            borderColor: '#22c55e',
                            backgroundColor: 'rgba(34, 197, 94, 0.1)',
                            fill: true,
                            tension: 0.3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'top' } },
                    scales: {
                        y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' } },
                        x: { grid: { color: 'rgba(255,255,255,0.05)' } }
                    }
                }
            });
            
            // Still update distribution chart with stats
            if (statsData) {
                const ctx2 = document.getElementById('distribution-chart')?.getContext('2d');
                if (ctx2) {
                    if (distributionChart) distributionChart.destroy();
                    distributionChart = new Chart(ctx2, {
                        type: 'doughnut',
                        data: {
                            labels: [t('static'), t('dynamic'), t('offline')],
                            datasets: [{
                                data: [
                                    statsData.static_hosts,
                                    statsData.dynamic_hosts,
                                    Math.max(0, (statsData.static_hosts + statsData.dynamic_hosts) - statsData.online_hosts)
                                ],
                                backgroundColor: ['#3b82f6', '#f59e0b', '#ef4444'],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { position: 'right' } }
                        }
                    });
                }
            }
        }
        
        // ========================================================================
        // Charts
        // ========================================================================
        function updateCharts(history) {
            const ctx1 = document.getElementById('history-chart')?.getContext('2d');
            const ctx2 = document.getElementById('distribution-chart')?.getContext('2d');
            
            if (!ctx1 || !ctx2) return;
            
            // History chart
            if (history && history.length > 0) {
                const labels = history.map(h => formatTime(h.timestamp));
                const onlineData = history.map(h => h.online);
                const offlineData = history.map(h => h.offline);
                
                if (historyChart) historyChart.destroy();
                historyChart = new Chart(ctx1, {
                    type: 'line',
                    data: {
                        labels,
                        datasets: [
                            {
                                label: t('online'),
                                data: onlineData,
                                borderColor: '#22c55e',
                                backgroundColor: 'rgba(34, 197, 94, 0.1)',
                                fill: true,
                                tension: 0.3
                            },
                            {
                                label: t('offline'),
                                data: offlineData,
                                borderColor: '#ef4444',
                                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                fill: true,
                                tension: 0.3
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { position: 'top' } },
                        scales: {
                            y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' } },
                            x: { grid: { color: 'rgba(255,255,255,0.05)' } }
                        }
                    }
                });
            }
            
            // Distribution chart
            if (statsData) {
                if (distributionChart) distributionChart.destroy();
                distributionChart = new Chart(ctx2, {
                    type: 'doughnut',
                    data: {
                        labels: [t('static'), t('dynamic'), t('offline')],
                        datasets: [{
                            data: [
                                statsData.static_hosts,
                                statsData.dynamic_hosts,
                                Math.max(0, (statsData.static_hosts + statsData.dynamic_hosts) - statsData.online_hosts)
                            ],
                            backgroundColor: ['#3b82f6', '#f59e0b', '#ef4444'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { position: 'right' } }
                    }
                });
            }
        }
        
        // ========================================================================
        // Actions
        // ========================================================================
        async function restartService(name) {
            if (!hasSudo) {
                pendingSudoCallback = () => restartService(name);
                showModal('sudo-modal');
                return;
            }
            
            const res = await fetch(`/api/services/${name}/restart`, { method: 'POST' });
            const data = await res.json();
            
            if (data.status === 'success') {
                showToast(`${name} restarted`);
                loadServices();
            } else {
                showToast(data.error || 'Failed to restart', 'error');
            }
        }
        
        document.getElementById('start-scan-btn').addEventListener('click', async () => {
            const res = await fetch('/api/scan/start', { method: 'POST' });
            document.getElementById('scan-status').textContent = t('scanning');
            document.getElementById('start-scan-btn').disabled = true;
            
            // Poll for updates
            const poll = setInterval(async () => {
                await loadScan();
                if (!scanData.in_progress) {
                    clearInterval(poll);
                    loadStats();
                    loadHistory();
                }
            }, 3000);
        });
        
        document.getElementById('refresh-leases-btn').addEventListener('click', loadLeases);
        
        // ========================================================================
        // Sudo Management
        // ========================================================================
        document.getElementById('set-sudo-btn').addEventListener('click', async () => {
            const password = document.getElementById('sudo-password-input').value;
            if (!password) return;
            
            const res = await fetch('/api/sudo', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ password })
            });
            
            if (res.ok) {
                hasSudo = true;
                updateSudoUI();
                document.getElementById('sudo-password-input').value = '';
                showToast(t('sudo_authorized'));
            } else {
                showToast('Invalid password', 'error');
            }
        });
        
        document.getElementById('clear-sudo-btn').addEventListener('click', async () => {
            await fetch('/api/sudo/clear', { method: 'POST' });
            hasSudo = false;
            updateSudoUI();
            showToast(t('sudo_revoked'));
        });
        
        document.getElementById('sudo-modal-submit').addEventListener('click', async () => {
            const password = document.getElementById('sudo-modal-password').value;
            if (!password) return;
            
            const res = await fetch('/api/sudo', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ password })
            });
            
            if (res.ok) {
                hasSudo = true;
                updateSudoUI();
                hideModal('sudo-modal');
                document.getElementById('sudo-modal-password').value = '';
                showToast(t('sudo_authorized'));
                
                if (pendingSudoCallback) {
                    pendingSudoCallback();
                    pendingSudoCallback = null;
                }
            } else {
                showToast('Invalid password', 'error');
            }
        });
        
        // ========================================================================
        // Add DHCP Host
        // ========================================================================
        async function addDhcpHost() {
            if (!hasSudo) {
                pendingSudoCallback = addDhcpHost;
                showModal('sudo-modal');
                return;
            }
            
            const hostname = document.getElementById('new-host-name').value.trim();
            const mac = document.getElementById('new-host-mac').value.trim().toLowerCase();
            const ip = document.getElementById('new-host-ip').value.trim();
            
            if (!hostname || !mac || !ip) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            const res = await fetch('/api/dhcp/host', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ hostname, mac, ip })
            });
            
            const data = await res.json();
            
            if (res.ok) {
                showToast(t('host_added'));
                hideModal('add-dhcp-modal');
                document.getElementById('new-host-name').value = '';
                document.getElementById('new-host-mac').value = '';
                document.getElementById('new-host-ip').value = '';
                loadDHCP();
                loadStats();
            } else {
                showToast(data.error || 'Failed to add host', 'error');
            }
        }
        
        // ========================================================================
        // Add DNS Zone
        // ========================================================================
        async function addDnsZone() {
            if (!hasSudo) {
                pendingSudoCallback = addDnsZone;
                showModal('sudo-modal');
                return;
            }
            
            const name = document.getElementById('new-zone-name').value.trim();
            const soa_ns = document.getElementById('new-zone-ns').value.trim();
            const soa_email = document.getElementById('new-zone-email').value.trim();
            const ttl = parseInt(document.getElementById('new-zone-ttl').value) || 86400;
            
            if (!name || !soa_ns || !soa_email) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            const res = await fetch('/api/dns/zone', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, soa_ns, soa_email, ttl })
            });
            
            const data = await res.json();
            
            if (res.ok) {
                showToast(t('zone_created'));
                hideModal('add-zone-modal');
                loadDNS();
                loadStats();
            } else {
                showToast(data.error || 'Failed to create zone', 'error');
            }
        }
        
        // ========================================================================
        // Add Network
        // ========================================================================
        async function addNetwork() {
            const network = document.getElementById('new-net-address').value.trim();
            const netmask = document.getElementById('new-net-mask').value.trim();
            const rangeStart = document.getElementById('new-net-start').value.trim();
            const rangeEnd = document.getElementById('new-net-end').value.trim();
            const gateway = document.getElementById('new-net-gateway').value.trim();
            const dns = document.getElementById('new-net-dns').value.trim();
            
            if (!network || !netmask) {
                showToast(t('fill_required_fields'), 'error');
                return;
            }
            
            const res = await fetch('/api/networks', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    network,
                    netmask,
                    range_start: rangeStart || null,
                    range_end: rangeEnd || null,
                    gateway: gateway || null,
                    dns: dns || null
                })
            });
            
            const data = await res.json();
            
            if (res.ok) {
                showToast(t('change_staged'));
                hideModal('add-network-modal');
                // Clear form
                document.getElementById('new-net-address').value = '';
                document.getElementById('new-net-mask').value = '';
                document.getElementById('new-net-start').value = '';
                document.getElementById('new-net-end').value = '';
                document.getElementById('new-net-gateway').value = '';
                document.getElementById('new-net-dns').value = '';
                loadNetworks();
                updatePendingBadge();
            } else {
                showToast(data.error || 'Failed to add network', 'error');
            }
        }
        
        async function deleteNetwork(network) {
            if (!confirm(t('confirm_delete') + '\n\n' + network)) {
                return;
            }
            
            const res = await fetch(`/api/networks/${encodeURIComponent(network)}`, {
                method: 'DELETE'
            });
            
            const data = await res.json();
            
            if (res.ok) {
                showToast(t('change_staged'));
                loadNetworks();
                updatePendingBadge();
            } else {
                showToast(data.error || 'Failed to delete network', 'error');
            }
        }
        
        function editNetwork(network, netmask, rangeStart, rangeEnd, gateway, dns) {
            document.getElementById('edit-net-address').value = network;
            document.getElementById('edit-net-display').value = network;
            document.getElementById('edit-net-mask').value = netmask || '';
            document.getElementById('edit-net-start').value = rangeStart || '';
            document.getElementById('edit-net-end').value = rangeEnd || '';
            document.getElementById('edit-net-gateway').value = gateway || '';
            document.getElementById('edit-net-dns').value = dns || '';
            showModal('edit-network-modal');
        }
        
        async function saveNetwork() {
            const network = document.getElementById('edit-net-address').value;
            const netmask = document.getElementById('edit-net-mask').value.trim();
            const rangeStart = document.getElementById('edit-net-start').value.trim();
            const rangeEnd = document.getElementById('edit-net-end').value.trim();
            const gateway = document.getElementById('edit-net-gateway').value.trim();
            const dns = document.getElementById('edit-net-dns').value.trim();
            
            const res = await fetch(`/api/networks/${encodeURIComponent(network)}`, {
                method: 'PUT',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    netmask: netmask || null,
                    range_start: rangeStart || null,
                    range_end: rangeEnd || null,
                    gateway: gateway || null,
                    dns: dns || null
                })
            });
            
            const data = await res.json();
            
            if (res.ok) {
                showToast(t('change_staged'));
                hideModal('edit-network-modal');
                loadNetworks();
                updatePendingBadge();
            } else {
                showToast(data.error || 'Failed to edit network', 'error');
            }
        }
        
        // ========================================================================
        // Promote Lease to Static
        // ========================================================================
        async function showPromoteModal(ip, mac, hostname) {
            document.getElementById('promote-ip').value = ip;
            document.getElementById('promote-mac').value = mac;
            document.getElementById('promote-ip-display').value = ip;
            document.getElementById('promote-mac-display').value = mac;
            document.getElementById('promote-hostname').value = hostname || '';
            document.getElementById('promote-fqdn').value = '';
            document.getElementById('promote-ptr').checked = false;
            
            // Load DNS zones into dropdown
            const zoneSelect = document.getElementById('promote-zone');
            zoneSelect.innerHTML = '<option value="">-- No DNS --</option>';
            
            try {
                const res = await fetch('/api/dns');
                const data = await res.json();
                data.zones?.filter(z => !z.is_reverse).forEach(zone => {
                    const opt = document.createElement('option');
                    opt.value = zone.name;
                    opt.textContent = zone.name;
                    zoneSelect.appendChild(opt);
                });
            } catch (e) {
                console.error('Failed to load zones:', e);
            }
            
            showModal('promote-lease-modal');
        }
        
        // Update FQDN when hostname or zone changes
        document.getElementById('promote-hostname')?.addEventListener('input', updateFqdn);
        document.getElementById('promote-zone')?.addEventListener('change', updateFqdn);
        
        function updateFqdn() {
            const hostname = document.getElementById('promote-hostname').value.trim();
            const zone = document.getElementById('promote-zone').value;
            const fqdnInput = document.getElementById('promote-fqdn');
            
            if (zone && hostname) {
                fqdnInput.value = `${hostname}.${zone}`;
                fqdnInput.disabled = false;
            } else {
                fqdnInput.value = '';
                fqdnInput.disabled = true;
            }
        }
        
        async function promoteLease() {
            const ip = document.getElementById('promote-ip').value;
            const mac = document.getElementById('promote-mac').value;
            const hostname = document.getElementById('promote-hostname').value.trim();
            const zone = document.getElementById('promote-zone').value;
            const fqdn = document.getElementById('promote-fqdn').value.trim();
            const createPtr = document.getElementById('promote-ptr').checked;
            
            if (!hostname) {
                showToast(t('hostname_required') || 'Hostname is required', 'error');
                return;
            }
            
            const res = await fetch('/api/leases/promote', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    ip,
                    mac,
                    hostname,
                    zone: zone || null,
                    fqdn: fqdn || null,
                    create_ptr: createPtr
                })
            });
            
            const data = await res.json();
            
            if (res.ok) {
                let msg = t('dhcp_staged') || 'DHCP reservation staged';
                if (data.dns?.status === 'staged') {
                    msg += ', ' + (t('dns_staged') || 'DNS record staged');
                }
                if (data.ptr?.status === 'staged') {
                    msg += ', ' + (t('ptr_staged') || 'PTR record staged');
                }
                showToast(msg);
                hideModal('promote-lease-modal');
                loadLeases();
                loadDHCP();
                updatePendingBadge();
            } else {
                showToast(data.error || 'Failed to promote lease', 'error');
            }
        }
        
        // ========================================================================
        // Search & Filters
        // ========================================================================
        document.getElementById('dhcp-search').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            document.querySelectorAll('#dhcp-table tbody tr').forEach(row => {
                row.style.display = row.textContent.toLowerCase().includes(query) ? '' : 'none';
            });
        });
        
        document.getElementById('dns-search').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            document.querySelectorAll('#dns-table tbody tr').forEach(row => {
                row.style.display = row.textContent.toLowerCase().includes(query) ? '' : 'none';
            });
        });
        
        // Filter tabs
        document.querySelectorAll('.filter-tabs').forEach(container => {
            container.querySelectorAll('.filter-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    container.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    const filter = tab.dataset.filter;
                    const table = container.closest('.card').querySelector('tbody');
                    
                    table.querySelectorAll('tr').forEach(row => {
                        if (filter === 'all') {
                            row.style.display = '';
                        } else if (filter === 'online') {
                            row.style.display = row.dataset.online === 'true' ? '' : 'none';
                        } else if (filter === 'offline') {
                            row.style.display = row.dataset.online === 'false' ? '' : 'none';
                        } else if (filter === 'active') {
                            row.style.display = row.dataset.state === 'active' ? '' : 'none';
                        }
                    });
                });
            });
        });
        
        // ========================================================================
        // Settings
        // ========================================================================
        document.getElementById('save-settings-btn').addEventListener('click', async () => {
            const settings = {
                scan_interval: parseInt(document.getElementById('setting-scan-interval').value),
                ping_timeout: parseInt(document.getElementById('setting-ping-timeout').value),
                network: document.getElementById('setting-network').value,
                max_threads: parseInt(document.getElementById('setting-max-threads').value)
            };
            
            const res = await fetch('/api/config', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(settings)
            });
            
            if (res.ok) {
                showToast(t('settings_saved'));
                loadConfig();
            }
        });
        
        // ========================================================================
        // Pending Changes
        // ========================================================================
        let pendingChangesCount = 0;
        
        async function loadPendingChanges() {
            const res = await fetch('/api/changes');
            const data = await res.json();
            pendingChangesCount = data.total;
            
            const btn = document.getElementById('activate-changes-btn');
            const countSpan = document.getElementById('pending-count');
            
            if (pendingChangesCount > 0) {
                btn.style.display = 'inline-flex';
                countSpan.textContent = pendingChangesCount;
            } else {
                btn.style.display = 'none';
            }
        }
        
        document.getElementById('activate-changes-btn').addEventListener('click', async () => {
            const res = await fetch('/api/changes/preview');
            const preview = await res.json();
            
            const previewDiv = document.getElementById('changes-preview');
            let html = '';
            
            if (preview.dhcp?.length) {
                html += '<div style="margin-bottom: 1rem;"><strong>DHCP Changes:</strong></div>';
                preview.dhcp.forEach(c => {
                    const color = c.startsWith('+') ? 'var(--success)' : c.startsWith('-') ? 'var(--error)' : 'var(--warning)';
                    html += `<div style="color: ${color}; margin-bottom: 0.25rem;">${c}</div>`;
                });
            }
            
            if (preview.dns?.length) {
                html += '<div style="margin: 1rem 0;"><strong>DNS Changes:</strong></div>';
                preview.dns.forEach(c => {
                    const color = c.startsWith('+') ? 'var(--success)' : c.startsWith('-') ? 'var(--error)' : 'var(--warning)';
                    html += `<div style="color: ${color}; margin-bottom: 0.25rem;">${c}</div>`;
                });
            }
            
            previewDiv.innerHTML = html || '<div style="color: var(--muted);">No pending changes</div>';
            showModal('activate-modal');
        });
        
        async function applyChanges() {
            if (!hasSudo) {
                pendingSudoCallback = applyChanges;
                showModal('sudo-modal');
                return;
            }
            
            const res = await fetch('/api/changes/apply', { method: 'POST' });
            const data = await res.json();
            
            hideModal('activate-modal');
            
            if (data.dhcp?.status === 'ok' || data.dns?.some(r => r.status === 'ok')) {
                showToast(t('changes_applied'));
                loadPendingChanges();
                loadDHCP();
                loadDNS();
                loadStats();
            } else {
                showToast('Failed to apply some changes', 'error');
            }
        }
        
        async function discardChanges() {
            await fetch('/api/changes/discard', { method: 'POST' });
            hideModal('activate-modal');
            showToast(t('changes_discarded'));
            loadPendingChanges();
        }
        
        // ========================================================================
        // Edit/Delete DHCP
        // ========================================================================
        function editDhcpHost(hostname, mac, ip) {
            document.getElementById('edit-host-original-name').value = hostname;
            document.getElementById('edit-host-name').value = hostname;
            document.getElementById('edit-host-mac').value = mac;
            document.getElementById('edit-host-ip').value = ip;
            showModal('edit-dhcp-modal');
        }
        
        async function saveDhcpHost() {
            const hostname = document.getElementById('edit-host-original-name').value;
            const mac = document.getElementById('edit-host-mac').value.trim().toLowerCase();
            const ip = document.getElementById('edit-host-ip').value.trim();
            
            const res = await fetch(`/api/dhcp/host/${encodeURIComponent(hostname)}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ mac, ip })
            });
            
            if (res.ok) {
                hideModal('edit-dhcp-modal');
                showToast(t('change_staged'));
                loadPendingChanges();
            } else {
                const data = await res.json();
                showToast(data.error || 'Failed to edit host', 'error');
            }
        }
        
        async function deleteDhcpHost(hostname) {
            if (!confirm(t('confirm_delete') + '\n\n' + hostname)) return;
            
            const res = await fetch(`/api/dhcp/host/${encodeURIComponent(hostname)}`, {
                method: 'DELETE'
            });
            
            if (res.ok) {
                showToast(t('change_staged'));
                loadPendingChanges();
            } else {
                const data = await res.json();
                showToast(data.error || 'Failed to delete host', 'error');
            }
        }
        
        // ========================================================================
        // Edit/Delete DNS
        // ========================================================================
        function editDnsRecord(zone, name, type, value) {
            document.getElementById('edit-dns-zone').value = zone;
            document.getElementById('edit-dns-original-name').value = name;
            document.getElementById('edit-dns-original-type').value = type;
            document.getElementById('edit-dns-name').value = name;
            document.getElementById('edit-dns-type').value = type;
            document.getElementById('edit-dns-value').value = value;
            showModal('edit-dns-modal');
        }
        
        async function saveDnsRecord() {
            const zone = document.getElementById('edit-dns-zone').value;
            const name = document.getElementById('edit-dns-original-name').value;
            const type = document.getElementById('edit-dns-original-type').value;
            const value = document.getElementById('edit-dns-value').value.trim();
            
            const res = await fetch(`/api/dns/zone/${encodeURIComponent(zone)}/record`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, type, value })
            });
            
            if (res.ok) {
                hideModal('edit-dns-modal');
                showToast(t('change_staged'));
                loadPendingChanges();
            } else {
                const data = await res.json();
                showToast(data.error || 'Failed to edit record', 'error');
            }
        }
        
        async function deleteDnsRecord(zone, name, type) {
            if (!confirm(t('confirm_delete') + '\n\n' + name + ' (' + type + ')')) return;
            
            const res = await fetch(`/api/dns/zone/${encodeURIComponent(zone)}/record/${encodeURIComponent(name)}/${encodeURIComponent(type)}`, {
                method: 'DELETE'
            });
            
            if (res.ok) {
                showToast(t('change_staged'));
                loadPendingChanges();
            } else {
                const data = await res.json();
                showToast(data.error || 'Failed to delete record', 'error');
            }
        }
        
        // ========================================================================
        // Initialize
        // ========================================================================
        async function init() {
            // Set initial language in dropdown
            updateLangDropdown();
            
            applyTheme();
            applyTranslations();
            
            await Promise.all([
                loadUser(),
                loadStats(),
                loadDHCP(),
                loadDNS(),
                loadScan(),
                loadLeases(),
                loadNetworks(),
                loadServices(),
                loadConfig(),
                loadHistory(),
                loadPendingChanges()
            ]);
            
            updateCharts();
        }
        
        init();
        
        // Auto-refresh every 60 seconds
        setInterval(async () => {
            await loadStats();
            await loadScan();
        }, 60000);
    </script>
</body>
</html>
